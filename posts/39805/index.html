<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><link href="https://fastly.jsdelivr.net/npm/hexo-tag-common@0.1.0/css/index.css" rel="stylesheet"><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png"><link rel="icon" href="/img/fluid.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#2f4154"><meta name="author" content="AWEI"><meta name="keywords" content="AWEI,AWEI的技术小屋"><meta name="description" content="初识数据库数据库相关概念DB        database        数据库 DBS        database system        数据库系统 DBMS        database management system        数据库管理系统 SQL        结构化查询语言，用于和 DBMS 通信的语言 数据库的好处 持久化数据到本地 可以实现结构化查询，方便管理"><meta property="og:type" content="article"><meta property="og:title" content="MySQL 学习笔记"><meta property="og:url" content="https://www.inencoding.com/posts/39805/index.html"><meta property="og:site_name" content="In-Encoding"><meta property="og:description" content="初识数据库数据库相关概念DB        database        数据库 DBS        database system        数据库系统 DBMS        database management system        数据库管理系统 SQL        结构化查询语言，用于和 DBMS 通信的语言 数据库的好处 持久化数据到本地 可以实现结构化查询，方便管理"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.inencoding.com/img/%E6%96%87%E7%AB%A0/mysql.jpg"><meta property="article:published_time" content="2021-03-12T18:40:24.000Z"><meta property="article:modified_time" content="2022-12-08T15:28:22.381Z"><meta property="article:author" content="AWEI"><meta property="article:tag" content="数据库"><meta property="article:tag" content="MySQL"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://www.inencoding.com/img/%E6%96%87%E7%AB%A0/mysql.jpg"><meta name="referrer" content="no-referrer-when-downgrade"><title>MySQL 学习笔记 - In-Encoding</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/fluid-extention.css"><script id="fluid-configs">var dntVal,Fluid=window.Fluid||{},CONFIG=(Fluid.ctx=Object.assign({},Fluid.ctx),{hostname:"www.inencoding.com",root:"/",version:"1.9.2",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!1,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"https://cdn.jsdelivr.net/gh/AWeiIsCoding/AWeiIsCoding.github.io/local-search.xml"});CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><style>.spoiler{display:inline-flex}p.spoiler{display:flex}.spoiler a{pointer-events:none}.spoiler-blur,.spoiler-blur>*{transition:text-shadow .5s ease}.spoiler .spoiler-blur,.spoiler .spoiler-blur>*{color:transparent;background-color:rgba(0,0,0,0);text-shadow:0 0 10px grey;cursor:pointer}.spoiler .spoiler-blur:hover,.spoiler .spoiler-blur:hover>*{text-shadow:0 0 5px grey}.spoiler-box,.spoiler-box>*{transition:color .5s ease,background-color .5s ease}.spoiler .spoiler-box,.spoiler .spoiler-box>*{color:#000;background-color:#000;text-shadow:none}</style><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="In-Encoding" type="application/atom+xml"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>InEncoding</strong></a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> 归档</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> 分类</a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> 标签</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(https://inencoding.oss-cn-shenzhen.aliyuncs.com/img/background.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="MySQL 学习笔记"></span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> AWEI</span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2021-03-13 02:40" pubdate>2021年3月13日 凌晨</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 36k 字</span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 296 分钟</span><span id="busuanzi_container_page_pv" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span> 次</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar category-bar" style="margin-right:-1rem"><div class="category-list"><div class="category row nomargin-x"><a class="category-item list-group-item category-item-action col-10 col-md-11 col-xm-11" title="学习笔记" id="heading-078425eaf316a180b0989442e53f920b" role="tab" data-toggle="collapse" href="#collapse-078425eaf316a180b0989442e53f920b" aria-expanded="true">学习笔记 <span class="list-group-count">(23)</span><i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-078425eaf316a180b0989442e53f920b" role="tabpanel" aria-labelledby="heading-078425eaf316a180b0989442e53f920b"><div class="category-post-list"><a href="/posts/53027/" title="Ajax 和 Json" class="list-group-item list-group-item-action"><span class="category-post">Ajax 和 Json</span></a> <a href="/posts/40991/" title="Docker" class="list-group-item list-group-item-action"><span class="category-post">Docker</span></a> <a href="/posts/14402/" title="Docker 常用环境搭建" class="list-group-item list-group-item-action"><span class="category-post">Docker 常用环境搭建</span></a> <a href="/posts/22111/" title="JQuery 学习笔记" class="list-group-item list-group-item-action"><span class="category-post">JQuery 学习笔记</span></a> <a href="/posts/43258/" title="Java 多线程学习笔记" class="list-group-item list-group-item-action"><span class="category-post">Java 多线程学习笔记</span></a> <a href="/posts/12475/" title="Java 注解与反射" class="list-group-item list-group-item-action"><span class="category-post">Java 注解与反射</span></a> <a href="/posts/15254/" title="Java 网络编程学习笔记" class="list-group-item list-group-item-action"><span class="category-post">Java 网络编程学习笔记</span></a> <a href="/posts/16781/" title="JavaWeb 学习笔记" class="list-group-item list-group-item-action"><span class="category-post">JavaWeb 学习笔记</span></a> <a href="/posts/33152/" title="MyBatis-Plus" class="list-group-item list-group-item-action"><span class="category-post">MyBatis-Plus</span></a> <a href="/posts/39805/" title="MySQL 学习笔记" class="list-group-item list-group-item-action active"><span class="category-post">MySQL 学习笔记</span></a> <a href="/posts/15608/" title="Mybatis" class="list-group-item list-group-item-action"><span class="category-post">Mybatis</span></a> <a href="/posts/27273/" title="Redis" class="list-group-item list-group-item-action"><span class="category-post">Redis</span></a> <a href="/posts/18155/" title="Spring" class="list-group-item list-group-item-action"><span class="category-post">Spring</span></a> <a href="/posts/46897/" title="Spring MVC" class="list-group-item list-group-item-action"><span class="category-post">Spring MVC</span></a> <a href="/posts/33757/" title="SpringBoot" class="list-group-item list-group-item-action"><span class="category-post">SpringBoot</span></a> <a href="/posts/42622/" title="SpringCloud" class="list-group-item list-group-item-action"><span class="category-post">SpringCloud</span></a> <a href="/posts/43782/" title="Vue" class="list-group-item list-group-item-action"><span class="category-post">Vue</span></a> <a href="/posts/43167/" title="git" class="list-group-item list-group-item-action"><span class="category-post">git</span></a> <a href="/posts/62461/" title="python 爬虫" class="list-group-item list-group-item-action"><span class="category-post">python 爬虫</span></a> <a href="/posts/13607/" title="基于 Centos6.5 的 Httpd 安装" class="list-group-item list-group-item-action"><span class="category-post">基于 Centos6.5 的 Httpd 安装</span></a> <a href="/posts/6262/" title="基于 Centos6.8 的 Hadoop 分布式集群安装" class="list-group-item list-group-item-action"><span class="category-post">基于 Centos6.8 的 Hadoop 分布式集群安装</span></a> <a href="/posts/59309/" title="基于 Centos7 的 Zookeeper 安装" class="list-group-item list-group-item-action"><span class="category-post">基于 Centos7 的 Zookeeper 安装</span></a> <a href="/posts/13858/" title="软件工程随笔" class="list-group-item list-group-item-action"><span class="category-post">软件工程随笔</span></a></div></div></div></div></aside></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">MySQL 学习笔记</h1><p class="note note-warning">本文最后更新于：2022年12月8日 晚上</p><div class="markdown-body"><h1 id="初识数据库"><a href="#初识数据库" class="headerlink" title="初识数据库"></a>初识数据库</h1><h2 id="数据库相关概念"><a href="#数据库相关概念" class="headerlink" title="数据库相关概念"></a>数据库相关概念</h2><p><strong>DB</strong> database 数据库</p><p><strong>DBS</strong> database system 数据库系统</p><p><strong>DBMS</strong> database management system 数据库管理系统</p><p><strong>SQL</strong> 结构化查询语言，用于和 DBMS 通信的语言</p><h2 id="数据库的好处"><a href="#数据库的好处" class="headerlink" title="数据库的好处"></a>数据库的好处</h2><ol><li>持久化数据到本地</li><li>可以实现结构化查询，方便管理</li></ol><h2 id="什么是数据库"><a href="#什么是数据库" class="headerlink" title="什么是数据库"></a>什么是数据库</h2><p>保存有组织的数据的容器（通常是一个文件或一组文件）</p><p>数据库是一个以某种有组织的方式存储数据的集合</p><p>数据库不是数据库软件</p><h2 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h2><p>命令行链接</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">--所有的语句都使用分号（;）结尾</span><br>mysql <span class="hljs-operator">-</span>u <span class="hljs-operator">-</span>p  <span class="hljs-comment">--链接数据库</span><br><br><span class="hljs-keyword">show</span> databases; <span class="hljs-comment">--查看所有的数据库</span><br><br>mysql<span class="hljs-operator">&gt;</span> use 数据库名; <span class="hljs-comment">--切换数据库use</span><br>Database changed<br><br><span class="hljs-keyword">show</span> tables; <span class="hljs-comment">--查看数据库中所有的表</span><br><br><span class="hljs-keyword">describe</span> 表名; <span class="hljs-comment">--显示数据库中所有的表的信息</span><br><br><span class="hljs-keyword">create</span> database 数据库名; <span class="hljs-comment">--创建一个新的数据库</span><br><br>exit; <span class="hljs-comment">--退出连接</span><br><br><span class="hljs-comment">--单行注释</span><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">多</span><br><span class="hljs-comment">行</span><br><span class="hljs-comment">注</span><br><span class="hljs-comment">释</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></tbody></table></figure><h2 id="数据库语言"><a href="#数据库语言" class="headerlink" title="数据库语言"></a>数据库语言</h2><p>DDL 定义</p><p>DML 操作</p><p>DQL 查询</p><p>DCL 控制</p><h1 id="操作数据库"><a href="#操作数据库" class="headerlink" title="操作数据库"></a>操作数据库</h1><p>操作数据库 &gt; 操作数据库中的表 &gt; 操作数据库中表的数据</p><h2 id="操作数据库-1"><a href="#操作数据库-1" class="headerlink" title="操作数据库"></a>操作数据库</h2><h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> database [if <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span>] 数据库名 <span class="hljs-type">character</span> <span class="hljs-keyword">set</span> utf8 <span class="hljs-keyword">collate</span> utf8_general_ci;<br></code></pre></td></tr></tbody></table></figure><h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> database  [if <span class="hljs-keyword">exists</span>] 数据库名;<br></code></pre></td></tr></tbody></table></figure><h3 id="使用数据库"><a href="#使用数据库" class="headerlink" title="使用数据库"></a>使用数据库</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 如果使用的表名或者字段名是一个关键字，需要带``</span><br>use 数据库名;<br></code></pre></td></tr></tbody></table></figure><h3 id="查看数据库"><a href="#查看数据库" class="headerlink" title="查看数据库"></a>查看数据库</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> databases; <span class="hljs-comment">-- 查看所有的数据库</span><br></code></pre></td></tr></tbody></table></figure><p><strong>学习思路</strong>：</p><ul><li>对照可视化查看 sql 语句</li><li>固定的语法或关键字要强行记住</li></ul><h2 id="数据库的数据类型"><a href="#数据库的数据类型" class="headerlink" title="数据库的数据类型"></a>数据库的数据类型</h2><blockquote><p>数值</p></blockquote><ul><li>tinyint 十分小的数据 1 字节</li><li>smallint 较小的数据 2 字节</li><li>mediumint 中等大小的数据 3 字节</li><li><strong>int 标准的整数 4 字节</strong></li><li>bigint 较大的数据 8 字节</li><li>float 浮点数 4 字节</li><li>double 浮点数 8 字节 (精度问题！！)</li><li>decimal 字符串形式的浮点数 金融计算的时候，一般使用</li></ul><blockquote><p>字符串</p></blockquote><ul><li>char 字符串固定大小的 0~255</li><li><strong>varchar 可变字符串 0~65536 常用的变量 string</strong></li><li>tinytext 微型文本 2^8-1</li><li><strong>text 文本串 2^16-1 保存大文本</strong></li></ul><blockquote><p>时间日期</p></blockquote><ul><li>date YYYY-MM-DD 日期格式</li><li>time HH:mm:ss 时间格式</li><li><strong>datetime YYYY-MM-DD HH:mm:ss 最常用的时间格式</strong></li><li><strong>timestamp 时间戳 1979.1.1 到现在的毫秒数</strong></li><li>year 年份表示</li></ul><blockquote><p>null</p></blockquote><ul><li>没有值，未知</li><li><strong>注意不要使用 null 进行运算，结果为 null</strong></li></ul><h2 id="数据库的字段属性（重点）"><a href="#数据库的字段属性（重点）" class="headerlink" title="数据库的字段属性（重点）"></a>数据库的字段属性（重点）</h2><p>Unsigned :</p><ul><li>无符号的整数</li><li>不能声明为负数</li></ul><p>zerofill :</p><ul><li>0 填充，不足的位数用 0 填充</li></ul><p>自增 ：</p><ul><li>自动在上一条记录的基础上 + 1（默认）</li><li>通常用来设计唯一的主键，index，必须为整数类型</li><li>可以自定义设计主键自增的起始值和步长</li></ul><p>非空：</p><ul><li>假设设置为 not null，如果不给它赋值，就会报错</li></ul><p>空 NULL：</p><ul><li>如果不填写值，默认就是 null</li></ul><p>默认 default：</p><ul><li>设置默认的值</li><li>sex，默认值为<strong>男</strong>，如果不指定该列的值，则会有默认值。</li></ul><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">/*	</span><br><span class="hljs-comment">每一个表都必须存在以下五个字段，做项目时确认数据存在的意义</span><br><span class="hljs-comment">id 主键</span><br><span class="hljs-comment">'version'	乐观锁</span><br><span class="hljs-comment">is_delete	伪删除</span><br><span class="hljs-comment">gmt_create	创建时间</span><br><span class="hljs-comment">gmt_update	修改时间</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></tbody></table></figure><h2 id="创建数据库表（重点）"><a href="#创建数据库表（重点）" class="headerlink" title="创建数据库表（重点）"></a>创建数据库表（重点）</h2><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">/*</span><br><span class="hljs-comment">目标：创建一个 school数据库</span><br><span class="hljs-comment">创建学生表（列，字段）使用SQL创建</span><br><span class="hljs-comment">学号int 登录密码 varchar（20）姓名，性别 varchar（2），出生日期（datetime），家庭住址，email</span><br><span class="hljs-comment">注意点，使用英文（），表的名称 和 字段尽量使用``括起来</span><br><span class="hljs-comment">AUTO INCREMENT自增</span><br><span class="hljs-comment">字符串使用单引号括起来！</span><br><span class="hljs-comment">所有的语句后面加,（英文的）,最后一个不用加</span><br><span class="hljs-comment">*/</span><br>USE test;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> `student`<br>(<br>    `id`       <span class="hljs-type">INT</span>(<span class="hljs-number">4</span>)      <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'学号'</span>,<br>    `name`     <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'匿名'</span> COMMENT <span class="hljs-string">'姓名'</span>,<br>    `password` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'123456'</span> COMMENT <span class="hljs-string">'密码'</span>,<br>    `sex`      <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">3</span>)  <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'女'</span> COMMENT <span class="hljs-string">'性别'</span>,<br>    `birthday` DATETIME             <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'出生日期'</span>,<br>    `address`  <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>)         <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'家庭住址'</span>,<br>    `email`    <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>)          <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'邮箱'</span>,<br>    <span class="hljs-keyword">PRIMARY</span> KEY (`id`)<br>) ENGINE <span class="hljs-operator">=</span> innodb<br>  <span class="hljs-keyword">DEFAULT</span> CHARSET <span class="hljs-operator">=</span> utf8;<br></code></pre></td></tr></tbody></table></figure><p>格式</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span>] `表名`(<br>    `字段名` 列类型 [属性][索引][注释],<br>    `字段名` 列类型 [属性][索引][注释],<br>    `字段名` 列类型 [属性][索引][注释],<br>    ......<br>    `字段名` 列类型 [属性][索引][注释],<br>    主键(`字段名`)<br>)[表类型][字符集设置][注释]<br></code></pre></td></tr></tbody></table></figure><p>常用语句：</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">CREATE</span> DATABASE 数据库名; <span class="hljs-comment">-- 查看创建数据库的语句</span><br><span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> 表名; <span class="hljs-comment">-- 查看数据表的定义语句</span><br><span class="hljs-keyword">DESC</span> 表名;<span class="hljs-comment">-- 显示表的结构</span><br></code></pre></td></tr></tbody></table></figure><h2 id="数据表的类型"><a href="#数据表的类型" class="headerlink" title="数据表的类型"></a>数据表的类型</h2><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 关于数据库引擎</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">innodb  默认使用</span><br><span class="hljs-comment">MYISAM  早些年使用</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th></th><th>innodb</th><th>MYISAM</th></tr></thead><tbody><tr><td>事务支持</td><td>不支持</td><td>支持</td></tr><tr><td>数据行锁定</td><td>不支持</td><td>不支持</td></tr><tr><td>外键约束</td><td>不支持</td><td>支持</td></tr><tr><td>全文索引</td><td>支持</td><td>不支持</td></tr><tr><td>表空间大小</td><td>较小</td><td>较大，约两倍</td></tr></tbody></table><p>常规使用操作：</p><ul><li>MYISAM 节约空间，速度较快</li><li>innodb 安全性高，事务的处理，多表多用户操作</li></ul><blockquote><p>在物理空间存在的位置</p></blockquote><p>所有的数据库文件都存在 data 目录下，一个文件夹对应一个数据库</p><p>本质还是文件的存储！</p><p>MySQL 引擎在物理文件上的区别</p><ul><li>innodb 在数据库表中只有一个 *.frm 文件，以及上级目录下的 ibdata1 文件</li><li>MYISAM 对应的文件<ul><li>*.frm 表结构定义的文件</li><li>*.MYD 数据文件</li><li>*.MYI 索引文件</li></ul></li></ul><blockquote><p>设置数据库的字符集编码</p></blockquote><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DEFAULT</span> CHARSET <span class="hljs-operator">=</span> utf8;<br></code></pre></td></tr></tbody></table></figure><p>若不设置，会是 mysql 默认的字符集（不支持中文）</p><p>MySQL 的默认编码时 Latin1</p><h2 id="修改删除表"><a href="#修改删除表" class="headerlink" title="修改删除表"></a>修改删除表</h2><blockquote><p>修改</p></blockquote><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 修改表名     ALTER TABLE 旧表名 RENAME AS 新表名;</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> student RENAME <span class="hljs-keyword">AS</span> xuesheng;<br><span class="hljs-comment">-- 增加表的字段       ALTER TABLE 表名 ADD `字段名` 列属性;</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> xuesheng<br>    <span class="hljs-keyword">ADD</span> `age` <span class="hljs-type">INT</span>(<span class="hljs-number">4</span>);<br><span class="hljs-comment">-- 修改表的字段     </span><br><span class="hljs-comment">-- ALTER TABLE 表名 MODIFY `字段名` 列属性;   </span><br><span class="hljs-comment">-- ALTER TABLE 表名 CHANGE `旧字段名` `新字段名` 列属性;</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> xuesheng<br>    MODIFY `age` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">4</span>); <span class="hljs-comment">-- modify修改约束,不用修改新名称</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> xuesheng<br>    CHANGE `age` `nianling` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">4</span>); <span class="hljs-comment">-- change修改约束需要先重命名</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>删除</p></blockquote><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 删除表的字段       ALTER TABLE 表名 DROP `字段名`;</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> xuesheng <span class="hljs-keyword">DROP</span> `nianling`;<br><span class="hljs-comment">-- 删除表（如果存在再删除）		DROP TABLE IF EXISTS 表名;</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> xuesheng;<br></code></pre></td></tr></tbody></table></figure><p>注意点：</p><ul><li>所有的创建和删除操作尽量加上判断，以免报错。</li></ul><h1 id="MySQL的数据管理"><a href="#MySQL的数据管理" class="headerlink" title="MySQL的数据管理"></a>MySQL 的数据管理</h1><h2 id="外键（了解）"><a href="#外键（了解）" class="headerlink" title="外键（了解）"></a>外键（了解）</h2><blockquote><p>方式 1，在建表的时候，增加约束</p></blockquote><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 学生表的gradeid字段要去引用年级表的gradeid字段</span><br><span class="hljs-comment">-- 定义外键key</span><br><span class="hljs-comment">-- 给这个外键添加约束（执行引用），references 引用</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `grade`<br>(<br>    `gradeid`   <span class="hljs-type">INT</span>(<span class="hljs-number">10</span>)     <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'年级id'</span>,<br>    `gradename` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'年纪名称'</span>,<br>    <span class="hljs-keyword">PRIMARY</span> KEY (`gradeid`)<br>) ENGINE <span class="hljs-operator">=</span> innodb,<br>  <span class="hljs-keyword">DEFAULT</span> CHARSET <span class="hljs-operator">=</span> utf8;<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> `student`<br>(<br>    `id`       <span class="hljs-type">INT</span>(<span class="hljs-number">4</span>)      <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'学号'</span>,<br>    `name`     <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'匿名'</span> COMMENT <span class="hljs-string">'姓名'</span>,<br>    `password` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'123456'</span> COMMENT <span class="hljs-string">'密码'</span>,<br>    `sex`      <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">3</span>)  <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'女'</span> COMMENT <span class="hljs-string">'性别'</span>,<br>    `birthday` DATETIME             <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'出生日期'</span>,<br>    `gradeid`  <span class="hljs-type">INT</span>(<span class="hljs-number">10</span>)     <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'年级id'</span>,<br>    `address`  <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>)         <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'家庭住址'</span>,<br>    `email`    <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>)          <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'邮箱'</span>,<br>    <span class="hljs-keyword">PRIMARY</span> KEY (`id`),<br>    KEY `fk_gradeid` (`gradeid`),<br>    <span class="hljs-keyword">CONSTRAINT</span><br>        `fk_gradeid` <span class="hljs-keyword">FOREIGN</span> KEY (`gradeid`) <span class="hljs-keyword">REFERENCES</span> `grade` (`gradeid`)<br>    <span class="hljs-comment">-- grade表的gradeid字段以fk_gradeid为名字给student表的gradeid字段作为外键</span><br>) ENGINE <span class="hljs-operator">=</span> innodb<br>  <span class="hljs-keyword">DEFAULT</span> CHARSET <span class="hljs-operator">=</span> utf8;<br></code></pre></td></tr></tbody></table></figure><p><strong>删除有外键关系的表的时候，必须先删除别人的表（从表），再删除引用的表（主表）。</strong></p><blockquote><p>方式 2 ，创建表成功后添加外键</p></blockquote><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">/*ALTER TABLE 要加键的表</span><br><span class="hljs-comment">    ADD CONSTRAINT 约束名 FOREIGN KEY (作为外键的键) REFERENCES 原来的表 (作为外键的字段);*/</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `grade`<br>(<br>    `gradeid`   <span class="hljs-type">INT</span>(<span class="hljs-number">10</span>)     <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'年级id'</span>,<br>    `gradename` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'年纪名称'</span>,<br>    <span class="hljs-keyword">PRIMARY</span> KEY (`gradeid`)<br>) ENGINE <span class="hljs-operator">=</span> innodb,<br>  <span class="hljs-keyword">DEFAULT</span> CHARSET <span class="hljs-operator">=</span> utf8;<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> `student`<br>(<br>    `id`       <span class="hljs-type">INT</span>(<span class="hljs-number">4</span>)      <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'学号'</span>,<br>    `name`     <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'匿名'</span> COMMENT <span class="hljs-string">'姓名'</span>,<br>    `password` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'123456'</span> COMMENT <span class="hljs-string">'密码'</span>,<br>    `sex`      <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">3</span>)  <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'女'</span> COMMENT <span class="hljs-string">'性别'</span>,<br>    `birthday` DATETIME             <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'出生日期'</span>,<br>    `gradeid`  <span class="hljs-type">INT</span>(<span class="hljs-number">10</span>)     <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'年级id'</span>,<br>    `address`  <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>)         <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'家庭住址'</span>,<br>    `email`    <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>)          <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'邮箱'</span>,<br>    <span class="hljs-keyword">PRIMARY</span> KEY (`id`)<br>) ENGINE <span class="hljs-operator">=</span> innodb<br>  <span class="hljs-keyword">DEFAULT</span> CHARSET <span class="hljs-operator">=</span> utf8;<br><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `student`<br>    <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> `fk_gradeid` <span class="hljs-keyword">FOREIGN</span> KEY (`gradeid`) <span class="hljs-keyword">REFERENCES</span> `grade` (`gradeid`);<br>    <span class="hljs-comment">-- grade表的gradeid字段以fk_gradeid为名字给student表的gradeid字段作为外键</span><br></code></pre></td></tr></tbody></table></figure><p>以上的操作为物理外键，数据库级别的外键，不建议使用（避免数据库过多造成困扰）</p><p>最佳实践</p><ul><li>数据库就是单纯的表，只用来存数据，只有行（数据）和列（字段）</li><li>想使用多张表的数据利用程序实现</li></ul><h2 id="DML语言（背）"><a href="#DML语言（背）" class="headerlink" title="DML语言（背）"></a>DML 语言（背）</h2><p><strong>数据库意义：</strong>数据存储，数据管理</p><p>DML 语言：数据操作语言</p><ul><li>insert</li><li>update</li><li>delete</li></ul><h2 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h2><blockquote><p>insert</p></blockquote><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">/*</span><br><span class="hljs-comment">插入语句（添加）</span><br><span class="hljs-comment">insert into 表名([字段1，字段2，字段3...])value('值1'),('值2'),('值3')</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span><br>    `grade` (`gradename`)<br><span class="hljs-keyword">VALUES</span><br>    (<span class="hljs-string">'大四'</span>);<br><span class="hljs-comment">-- 由于主键自增我们可以省略（如果不写表的字段，它会一一匹配）</span><br><span class="hljs-comment">-- 一般写插入语句，我们一定要数据和字段一一对应</span><br><br><span class="hljs-comment">-- 插入多个字段</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span><br>    `grade`(`gradename`)<br><span class="hljs-keyword">VALUES</span><br>    (<span class="hljs-string">'大二'</span>),<br>    (<span class="hljs-string">'大三'</span>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span><br>    `student`(`name`, `password`, `sex`)<br><span class="hljs-keyword">VALUES</span><br>    (<span class="hljs-string">'张三'</span>, <span class="hljs-string">'aaaaaa'</span>, <span class="hljs-string">'男'</span>),<br>    (<span class="hljs-string">'王五'</span>, <span class="hljs-string">'222222'</span>, <span class="hljs-string">'女'</span>);<br></code></pre></td></tr></tbody></table></figure><p>语法：insert into 表名 ([字段 1，字段 2，字段 3…]) value (‘值 1’),(‘值 2’),(‘值 3’)</p><p>注意事项：</p><ul><li>字段和字段之间使用<strong>英文逗号</strong>隔开</li><li>字段可以省略，但是后面的值必须要一一对应</li><li>可以同时插入多条数据，values 后面的值使用英文逗号隔开即可</li></ul><h2 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h2><blockquote><p>update 修改谁（条件） set 原来的值 = 新值</p></blockquote><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 修改学员名字,带了条件</span><br><span class="hljs-keyword">UPDATE</span> `student`<br><span class="hljs-keyword">SET</span><br>    `name`<span class="hljs-operator">=</span><span class="hljs-string">'哈哈哈'</span><br><span class="hljs-keyword">WHERE</span><br>    `password` <span class="hljs-operator">=</span> <span class="hljs-string">'aaaaaa'</span>;<br><span class="hljs-comment">-- 不指定条件的情况下，会改动所有表！！！！</span><br><span class="hljs-comment">-- 修改多个属性时用英文逗号隔开</span><br><span class="hljs-keyword">UPDATE</span> `student`<br><span class="hljs-keyword">SET</span><br>    `name`<span class="hljs-operator">=</span><span class="hljs-string">'哈哈哈'</span>,<br>    `sex`<span class="hljs-operator">=</span><span class="hljs-string">'保密'</span>,<br>    `gradeid`<span class="hljs-operator">=</span><span class="hljs-number">1</span><br><span class="hljs-keyword">WHERE</span><br>    `password` <span class="hljs-operator">=</span> <span class="hljs-string">'aaaaaa'</span>;<br></code></pre></td></tr></tbody></table></figure><p>语法：UPDATE 表名 SET 字段 = VALUE,[字段 = VALUE] WHERE [条件]</p><p>条件： where 子句 运算符 id 等于 / 大于什么 在某个区间修改</p><p>操作符会返回布尔值</p><p>= 等于</p><p>&lt;&gt; 或！= 不等于</p><table><thead><tr><th>操作符</th><th>含义</th></tr></thead><tbody><tr><td>=</td><td>等于</td></tr><tr><td>&lt;&gt; 或！=</td><td>不等于</td></tr><tr><td>&gt;</td><td>大于</td></tr><tr><td>&lt;</td><td>小于</td></tr><tr><td>&gt;=</td><td>大于等于</td></tr><tr><td>&gt;=</td><td>小于等于</td></tr><tr><td>between…and…</td><td>在某个范围内</td></tr><tr><td>and</td><td>&amp;&amp;</td></tr><tr><td>or</td><td>||</td></tr></tbody></table><p>注意：</p><ul><li>数据库的列尽量带上 ``</li><li>条件，筛选的条件，如果没有指定则会修改所有的列</li><li>value，是一个具体的值，也可以是一个变量</li></ul><h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><blockquote><p>delete 命令</p></blockquote><p>语法：delete form 表名 [where 条件] 需要条件，否则全部清空</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DELETE</span><br><span class="hljs-keyword">FROM</span><br>    `student`<br><span class="hljs-keyword">WHERE</span><br>    `password` <span class="hljs-operator">=</span> <span class="hljs-string">'222222'</span>;<br></code></pre></td></tr></tbody></table></figure><blockquote><p>truncate 命令</p></blockquote><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">TRUNCATE</span> <span class="hljs-keyword">TABLE</span> `student`;<br></code></pre></td></tr></tbody></table></figure><p>作用：完全清空一个数据库表，表的结构和索引约束不会变。</p><blockquote><p>delete 和 truncate 的区别</p></blockquote><ul><li><p>相同：都能删除数据，不会删除表结构</p></li><li><p>不同：</p><ul><li>truncate 会重新设置表的自增列 计数器归零</li><li>truncate 不会影响事务</li></ul></li></ul><p>delete 删除的问题，重启数据库后：</p><ul><li>innodb 自增列从 1 开始，存储在内存中，断电即消失</li><li>myisam 继续从上一个自增量开始，存在文件中，不会丢失</li></ul><h1 id="DQL查询数据"><a href="#DQL查询数据" class="headerlink" title="DQL查询数据"></a>DQL 查询数据</h1><p>使用的表</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> DATABASE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> `school`;<br><span class="hljs-comment">-- 创建一个 school 数据库</span><br>USE `school`;<span class="hljs-comment">-- 创建学生表</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `student`;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `student`<br>(<br>    `studentno`    <span class="hljs-type">INT</span>(<span class="hljs-number">4</span>)       <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 学号 '</span>,<br>    `loginpwd`     <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>    `studentname`  <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 学生姓名 '</span>,<br>    `sex`          TINYINT(<span class="hljs-number">1</span>)  <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 性别，0 或 1'</span>,<br>    `gradeid`      <span class="hljs-type">INT</span>(<span class="hljs-number">11</span>)     <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 年级编号 '</span>,<br>    `phone`        <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>)  <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 联系电话，允许为空 '</span>,<br>    `address`      <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 地址，允许为空 '</span>,<br>    `borndate`     DATETIME    <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 出生时间 '</span>,<br>    `email`        <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>)  <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 邮箱账号允许为空 '</span>,<br>    `identitycard` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">18</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 身份证号 '</span>,<br>    <span class="hljs-keyword">PRIMARY</span> KEY (`studentno`),<br>    <span class="hljs-keyword">UNIQUE</span> KEY `identitycard` (`identitycard`),<br>    KEY `email` (`email`)<br>) ENGINE <span class="hljs-operator">=</span> myisam<br>  <span class="hljs-keyword">DEFAULT</span> CHARSET <span class="hljs-operator">=</span> utf8;<br><br><span class="hljs-comment">-- 创建年级表</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `grade`;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `grade`<br>(<br>    `gradeid`   <span class="hljs-type">INT</span>(<span class="hljs-number">11</span>)     <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">' 年级编号 '</span>,<br>    `gradename` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 年级名称 '</span>,<br>    <span class="hljs-keyword">PRIMARY</span> KEY (`gradeid`)<br>) ENGINE <span class="hljs-operator">=</span> innodb<br>  AUTO_INCREMENT <span class="hljs-operator">=</span> <span class="hljs-number">6</span><br>  <span class="hljs-keyword">DEFAULT</span> CHARSET <span class="hljs-operator">=</span> utf8;<br><br><span class="hljs-comment">-- 创建科目表</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `subject`;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `subject`<br>(<br>    `subjectno`   <span class="hljs-type">INT</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">' 课程编号 '</span>,<br>    `subjectname` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 课程名称 '</span>,<br>    `classhour`   <span class="hljs-type">INT</span>(<span class="hljs-number">4</span>)      <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 学时 '</span>,<br>    `gradeid`     <span class="hljs-type">INT</span>(<span class="hljs-number">4</span>)      <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 年级编号 '</span>,<br>    <span class="hljs-keyword">PRIMARY</span> KEY (`subjectno`)<br>) ENGINE <span class="hljs-operator">=</span> innodb<br>  AUTO_INCREMENT <span class="hljs-operator">=</span> <span class="hljs-number">19</span><br>  <span class="hljs-keyword">DEFAULT</span> CHARSET <span class="hljs-operator">=</span> utf8;<br><br><span class="hljs-comment">-- 创建成绩表</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `<span class="hljs-keyword">result</span>`;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `<span class="hljs-keyword">result</span>`<br>(<br>    `studentno`     <span class="hljs-type">INT</span>(<span class="hljs-number">4</span>)   <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 学号 '</span>,<br>    `subjectno`     <span class="hljs-type">INT</span>(<span class="hljs-number">4</span>)   <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 课程编号 '</span>,<br>    `examdate`      DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 考试日期 '</span>,<br>    `studentresult` <span class="hljs-type">INT</span>(<span class="hljs-number">4</span>)   <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 考试成绩 '</span>,<br>    KEY `subjectno` (`subjectno`)<br>) ENGINE <span class="hljs-operator">=</span> innodb<br>  <span class="hljs-keyword">DEFAULT</span> CHARSET <span class="hljs-operator">=</span> utf8;<br><br><span class="hljs-comment">-- 插入学生数据 其余自行添加 这里只添加了 2 行</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span><br>    `student` (`studentno`, `loginpwd`, `studentname`, `sex`, `gradeid`, `phone`, `address`, `borndate`, `email`,<br>               `identitycard`)<br><span class="hljs-keyword">VALUES</span><br>(<span class="hljs-number">1000</span>, <span class="hljs-string">'123456'</span>, <span class="hljs-string">' 张伟 '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-string">'13800001234'</span>, <span class="hljs-string">' 北京朝阳 '</span>, <span class="hljs-string">'1980-1-1'</span>, <span class="hljs-string">'text123@qq.com'</span>, <span class="hljs-string">'123456198001011234'</span>),<br>(<span class="hljs-number">1001</span>, <span class="hljs-string">'123456'</span>, <span class="hljs-string">' 赵强 '</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-string">'13800002222'</span>, <span class="hljs-string">' 广东深圳 '</span>, <span class="hljs-string">'1990-1-1'</span>, <span class="hljs-string">'text111@qq.com'</span>, <span class="hljs-string">'123456199001011233'</span>);<br><br><span class="hljs-comment">-- 插入成绩数据  这里仅插入了一组，其余自行添加</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span><br>    `<span class="hljs-keyword">result</span>`(`studentno`, `subjectno`, `examdate`, `studentresult`)<br><span class="hljs-keyword">VALUES</span><br>    (<span class="hljs-number">1000</span>, <span class="hljs-number">1</span>, <span class="hljs-string">'2013-11-11 16:00:00'</span>, <span class="hljs-number">85</span>),<br>    (<span class="hljs-number">1000</span>, <span class="hljs-number">2</span>, <span class="hljs-string">'2013-11-12 16:00:00'</span>, <span class="hljs-number">70</span>),<br>    (<span class="hljs-number">1000</span>, <span class="hljs-number">3</span>, <span class="hljs-string">'2013-11-11 09:00:00'</span>, <span class="hljs-number">68</span>),<br>    (<span class="hljs-number">1000</span>, <span class="hljs-number">4</span>, <span class="hljs-string">'2013-11-13 16:00:00'</span>, <span class="hljs-number">98</span>),<br>    (<span class="hljs-number">1000</span>, <span class="hljs-number">5</span>, <span class="hljs-string">'2013-11-14 16:00:00'</span>, <span class="hljs-number">58</span>);<br><br><span class="hljs-comment">-- 插入年级数据</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span><br>    `grade` (`gradeid`, `gradename`)<br><span class="hljs-keyword">VALUES</span><br>    (<span class="hljs-number">1</span>, <span class="hljs-string">' 大一 '</span>),<br>    (<span class="hljs-number">2</span>, <span class="hljs-string">' 大二 '</span>),<br>    (<span class="hljs-number">3</span>, <span class="hljs-string">' 大三 '</span>),<br>    (<span class="hljs-number">4</span>, <span class="hljs-string">' 大四 '</span>),<br>    (<span class="hljs-number">5</span>, <span class="hljs-string">' 预科班 '</span>);<br><br><span class="hljs-comment">-- 插入科目数据</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span><br>    `subject`(`subjectno`, `subjectname`, `classhour`, `gradeid`)<br><span class="hljs-keyword">VALUES</span><br>    (<span class="hljs-number">1</span>, <span class="hljs-string">' 高等数学 - 1'</span>, <span class="hljs-number">110</span>, <span class="hljs-number">1</span>),<br>    (<span class="hljs-number">2</span>, <span class="hljs-string">' 高等数学 - 2'</span>, <span class="hljs-number">110</span>, <span class="hljs-number">2</span>),<br>    (<span class="hljs-number">3</span>, <span class="hljs-string">' 高等数学 - 3'</span>, <span class="hljs-number">100</span>, <span class="hljs-number">3</span>),<br>    (<span class="hljs-number">4</span>, <span class="hljs-string">' 高等数学 - 4'</span>, <span class="hljs-number">130</span>, <span class="hljs-number">4</span>),<br>    (<span class="hljs-number">5</span>, <span class="hljs-string">'C 语言 - 1'</span>, <span class="hljs-number">110</span>, <span class="hljs-number">1</span>),<br>    (<span class="hljs-number">6</span>, <span class="hljs-string">'C 语言 - 2'</span>, <span class="hljs-number">110</span>, <span class="hljs-number">2</span>),<br>    (<span class="hljs-number">7</span>, <span class="hljs-string">'C 语言 - 3'</span>, <span class="hljs-number">100</span>, <span class="hljs-number">3</span>),<br>    (<span class="hljs-number">8</span>, <span class="hljs-string">'C 语言 - 4'</span>, <span class="hljs-number">130</span>, <span class="hljs-number">4</span>),<br>    (<span class="hljs-number">9</span>, <span class="hljs-string">'Java 程序设计 - 1'</span>, <span class="hljs-number">110</span>, <span class="hljs-number">1</span>),<br>    (<span class="hljs-number">10</span>, <span class="hljs-string">'Java 程序设计 - 2'</span>, <span class="hljs-number">110</span>, <span class="hljs-number">2</span>),<br>    (<span class="hljs-number">11</span>, <span class="hljs-string">'Java 程序设计 - 3'</span>, <span class="hljs-number">100</span>, <span class="hljs-number">3</span>),<br>    (<span class="hljs-number">12</span>, <span class="hljs-string">'Java 程序设计 - 4'</span>, <span class="hljs-number">130</span>, <span class="hljs-number">4</span>),<br>    (<span class="hljs-number">13</span>, <span class="hljs-string">' 数据库结构 - 1'</span>, <span class="hljs-number">110</span>, <span class="hljs-number">1</span>),<br>    (<span class="hljs-number">14</span>, <span class="hljs-string">' 数据库结构 - 2'</span>, <span class="hljs-number">110</span>, <span class="hljs-number">2</span>),<br>    (<span class="hljs-number">15</span>, <span class="hljs-string">' 数据库结构 - 3'</span>, <span class="hljs-number">100</span>, <span class="hljs-number">3</span>),<br>    (<span class="hljs-number">16</span>, <span class="hljs-string">' 数据库结构 - 4'</span>, <span class="hljs-number">130</span>, <span class="hljs-number">4</span>),<br>    (<span class="hljs-number">17</span>, <span class="hljs-string">'C# 基础 '</span>, <span class="hljs-number">130</span>, <span class="hljs-number">1</span>);<br></code></pre></td></tr></tbody></table></figure><h2 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h2><p>（data query language：数据查询语言）</p><ul><li>所有的查询操作都用它 select</li><li>简单的查询，复杂的查询都能做</li><li>数据库中最核心的语言，最重要的语句</li><li>使用频率最高的语句</li></ul><h2 id="指定查询字段"><a href="#指定查询字段" class="headerlink" title="指定查询字段"></a>指定查询字段</h2><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 查询全部的学生    SELECT * FROM 表;</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span><br>    student;<br><br><span class="hljs-comment">-- 查询指定字段      SELECT 字段 FROM 表;</span><br><span class="hljs-keyword">SELECT</span><br>    `studentno`,<br>    `studentname`<br><span class="hljs-keyword">FROM</span><br>    student;<br><br><span class="hljs-comment">-- 别名，给结果起一个名字   as 可以给字段和表起别名</span><br><span class="hljs-keyword">SELECT</span><br>    `studentno`   <span class="hljs-keyword">AS</span> <span class="hljs-string">'学号'</span>,<br>    `studentname` <span class="hljs-keyword">AS</span> <span class="hljs-string">'学生姓名'</span><br><span class="hljs-keyword">FROM</span><br>    student <span class="hljs-keyword">AS</span> s;<br><br><span class="hljs-comment">-- 函数 concat(a,b)</span><br><span class="hljs-keyword">SELECT</span><br>    concat(<span class="hljs-string">'姓名：'</span>, studentname) <span class="hljs-keyword">AS</span> <span class="hljs-string">'新名字'</span><br><span class="hljs-keyword">FROM</span><br>    student;<br></code></pre></td></tr></tbody></table></figure><p>语法：SELECT 字段 FROM 表；</p><blockquote><p>有时候，列名字不明确，可以使用 AS 起别名， 字段名 as 别名 表名 as 别名</p></blockquote><blockquote><p>去重 distinct</p></blockquote><p>作用：去除 select 查询出来的结果中重复的数据，重复的数据只显示一条</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 查询全部考试成绩</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span><br>    <span class="hljs-keyword">result</span>;<br><span class="hljs-comment">-- 查询哪些同学参加了考试</span><br><span class="hljs-keyword">SELECT</span><br>    `studentno`<br><span class="hljs-keyword">FROM</span><br>    <span class="hljs-keyword">result</span>;<br><span class="hljs-comment">-- 发现重复数据，去重</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span><br>    `studentno`<br><span class="hljs-keyword">FROM</span><br>    <span class="hljs-keyword">result</span>;<br></code></pre></td></tr></tbody></table></figure><blockquote><p>数据库的列</p></blockquote><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 查询系统版本</span><br><span class="hljs-keyword">SELECT</span> version();<br><span class="hljs-comment">-- 用于计算</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-number">100</span> <span class="hljs-operator">*</span> <span class="hljs-number">3</span> <span class="hljs-operator">-</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AS</span> <span class="hljs-string">'计算结果'</span>;<br><span class="hljs-comment">-- 查询自增步长</span><br><span class="hljs-keyword">SELECT</span> @<span class="hljs-variable">@auto</span>_increment_increment;<br><br><span class="hljs-comment">-- 学员成绩+1</span><br><span class="hljs-keyword">SELECT</span><br>    `studentno`,<br>    `studentresult` <span class="hljs-operator">+</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AS</span> <span class="hljs-string">'提分后'</span><br><span class="hljs-keyword">FROM</span><br>    <span class="hljs-keyword">result</span>;<br></code></pre></td></tr></tbody></table></figure><p>数据库中的表达式：文本值，列，null，函数，计算表达式，系统变量</p><p>SELECT <strong>表达式</strong> FROM 表；</p><h2 id="where条件子句"><a href="#where条件子句" class="headerlink" title="where条件子句"></a>where 条件子句</h2><p>作用：检索数据中 == 符合条件的值</p><p>搜索的条件由一个或者多个表达式组成 结果是 <strong>布尔值</strong></p><blockquote><p>逻辑运算符</p></blockquote><table><thead><tr><th>运算符</th><th>语法</th></tr></thead><tbody><tr><td>and &amp;&amp;</td><td>a and b a&amp;&amp;b</td></tr><tr><td>or||</td><td>a or b a||b</td></tr><tr><td>not ！</td><td>not a ！a</td></tr></tbody></table><p>尽量使用英文字母</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 查询成绩在95与100之间</span><br><span class="hljs-keyword">SELECT</span><br>    `studentno`,<br>    `studentresult`<br><span class="hljs-keyword">FROM</span><br>    <span class="hljs-keyword">result</span><br><span class="hljs-keyword">WHERE</span><br>      `studentresult` <span class="hljs-operator">&gt;=</span> <span class="hljs-number">95</span><br>  <span class="hljs-keyword">AND</span> `studentresult` <span class="hljs-operator">&lt;=</span> <span class="hljs-number">100</span>;<br><br><span class="hljs-comment">-- 模糊查询成绩在95与100之间</span><br><span class="hljs-keyword">SELECT</span><br>    `studentno`,<br>    `studentresult`<br><span class="hljs-keyword">FROM</span><br>    <span class="hljs-keyword">result</span><br><span class="hljs-keyword">WHERE</span><br>    `studentresult` <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">95</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">100</span>;<br><br><span class="hljs-comment">-- 除了98分之外的分数</span><br><span class="hljs-keyword">SELECT</span><br>    `studentno`,<br>    `studentresult`<br><span class="hljs-keyword">FROM</span><br>    <span class="hljs-keyword">result</span><br><span class="hljs-keyword">WHERE</span><br>    <span class="hljs-keyword">NOT</span> `studentresult` <span class="hljs-operator">=</span> <span class="hljs-number">98</span>;<br></code></pre></td></tr></tbody></table></figure><blockquote><p>模糊查询：比较运算符</p></blockquote><table><thead><tr><th>运算符</th><th>语法</th><th>描述</th></tr></thead><tbody><tr><td>is null</td><td>a is null</td><td>如果 a 为 null，结果为真</td></tr><tr><td>is not null</td><td>a is not null</td><td>如果 a 为 not null，结果为真</td></tr><tr><td>between</td><td>a betweent b and c</td><td>若 a 在 b 和 c 之间，结果为真</td></tr><tr><td><strong>like</strong></td><td>a like b</td><td>SQL 匹配，如果 a 匹配 b，结果为真</td></tr><tr><td>in</td><td>a in （a1，a2…）</td><td>假设 a 在 a1，或者 a2… 其中的某一个值中，结果为真</td></tr></tbody></table><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span><br>    `studentno`,<br>    `studentname`,<br>    `borndate`<br><span class="hljs-keyword">FROM</span><br>    student<br><span class="hljs-keyword">WHERE</span><br>    `email` <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%text12%'</span>;<br></code></pre></td></tr></tbody></table></figure><p>% 代表 0 至任意个字符，__代表一个字符</p><h2 id="联表查询"><a href="#联表查询" class="headerlink" title="联表查询"></a>联表查询</h2><blockquote><p>join 对比</p></blockquote><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">/*</span><br><span class="hljs-comment">思路：</span><br><span class="hljs-comment">1.分析需求，分析查询的字段来自哪些表（连接查询）</span><br><span class="hljs-comment">2.确定使用哪种连接查询   7种</span><br><span class="hljs-comment">确定交叉点（这两个表中那个数据时相同的）</span><br><span class="hljs-comment">判断的条件： 学生表中的studentno=成绩表中的studentno</span><br><span class="hljs-comment">*/</span><br><span class="hljs-comment">-- INNER JOIN</span><br><span class="hljs-keyword">SELECT</span><br>    s.`studentno`,<br>    `studentname`,<br>    `subjectno`,<br>    `studentresult`<br><span class="hljs-keyword">FROM</span><br>    student <span class="hljs-keyword">AS</span> s<br>        <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> <span class="hljs-keyword">result</span> <span class="hljs-keyword">AS</span> r <span class="hljs-keyword">ON</span> s.studentno <span class="hljs-operator">=</span> r.studentno;<br><br><span class="hljs-comment">-- RIGHT JOIN</span><br><span class="hljs-keyword">SELECT</span><br>    s.`studentno`,<br>    `studentname`,<br>    `subjectno`,<br>    `studentresult`<br><span class="hljs-keyword">FROM</span><br>    student <span class="hljs-keyword">AS</span> s<br>        <span class="hljs-keyword">RIGHT</span> <span class="hljs-keyword">JOIN</span> <span class="hljs-keyword">result</span> <span class="hljs-keyword">AS</span> r <span class="hljs-keyword">ON</span> s.studentno <span class="hljs-operator">=</span> r.studentno;<br><br><span class="hljs-comment">-- LEFT JOIN</span><br><span class="hljs-keyword">SELECT</span><br>    s.`studentno`,<br>    `studentname`,<br>    `subjectno`,<br>    `studentresult`<br><span class="hljs-keyword">FROM</span><br>    student <span class="hljs-keyword">AS</span> s<br>        <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> <span class="hljs-keyword">result</span> <span class="hljs-keyword">AS</span> r <span class="hljs-keyword">ON</span> s.studentno <span class="hljs-operator">=</span> r.studentno;<br></code></pre></td></tr></tbody></table></figure><table><thead><tr><th>操作</th><th>描述</th></tr></thead><tbody><tr><td>INNER JOIN</td><td>如果表中至少有一个匹配，就返回行数据</td></tr><tr><td>LEFT JOIN</td><td>从左表中返回所有的值，即使右表没有匹配</td></tr><tr><td>RIGHT JOIN</td><td>从右表中返回所有的值，即使左表没有匹配</td></tr></tbody></table><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 在三张表中查询参加了考试的同学的信息，学号 姓名 科目 分数</span><br><span class="hljs-keyword">SELECT</span><br>    s.`studentno`   <span class="hljs-keyword">AS</span> <span class="hljs-string">'学号'</span>,<br>    `studentname`   <span class="hljs-keyword">AS</span> <span class="hljs-string">'姓名'</span>,<br>    `subjectname`   <span class="hljs-keyword">AS</span> <span class="hljs-string">'科目'</span>,<br>    `studentresult` <span class="hljs-keyword">AS</span> <span class="hljs-string">'分数'</span><br><span class="hljs-keyword">FROM</span><br>    student <span class="hljs-keyword">AS</span> s<br>        <span class="hljs-keyword">RIGHT</span> <span class="hljs-keyword">JOIN</span> <span class="hljs-keyword">result</span> <span class="hljs-keyword">AS</span> r <span class="hljs-keyword">ON</span> s.studentno <span class="hljs-operator">=</span> r.studentno<br>        <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> subject <span class="hljs-keyword">AS</span> s2 <span class="hljs-keyword">ON</span> r.subjectno <span class="hljs-operator">=</span> s2.subjectno;<br></code></pre></td></tr></tbody></table></figure><blockquote><p>自连接</p></blockquote><p>需要的表：</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `school`.`category`<br>(<br>    `categoryid`   <span class="hljs-type">INT</span>(<span class="hljs-number">3</span>)      <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'id'</span>,<br>    `pid`          <span class="hljs-type">INT</span>(<span class="hljs-number">3</span>)      <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 父 id 没有父则为 1'</span>,<br>    `categoryname` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">' 种类名字 '</span>,<br>    <span class="hljs-keyword">PRIMARY</span> KEY (`categoryid`)<br>) ENGINE <span class="hljs-operator">=</span> INNODB<br>  CHARSET <span class="hljs-operator">=</span> utf8<br>  <span class="hljs-keyword">COLLATE</span> <span class="hljs-operator">=</span> utf8_general_ci;<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span><br>    `school`.`category` (`categoryid`, `pid`, `categoryname`)<br><span class="hljs-keyword">VALUES</span><br>    (<span class="hljs-string">'2'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">' 信息技术 '</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span><br>    `school`.`category` (`categoryid`, `pid`, `categoryname`)<br><span class="hljs-keyword">VALUES</span><br>    (<span class="hljs-string">'3'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">' 软件开发 '</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span><br>    `school`.`category` (`categoryid`, `pid`, `categoryname`)<br><span class="hljs-keyword">VALUES</span><br>    (<span class="hljs-string">'5'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">' 美术设计 '</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span><br>    `school`.`category` (`categoryid`, `pid`, `categoryname`)<br><span class="hljs-keyword">VALUES</span><br>    (<span class="hljs-string">'4'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">' 数据库 '</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span><br>    `school`.`category` (`categoryid`, `pid`, `categoryname`)<br><span class="hljs-keyword">VALUES</span><br>    (<span class="hljs-string">'8'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">' 办公信息 '</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span><br>    `school`.`category` (`categoryid`, `pid`, `categoryname`)<br><span class="hljs-keyword">VALUES</span><br>    (<span class="hljs-string">'6'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'web 开发 '</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span><br>    `school`.`category` (`categoryid`, `pid`, `categoryname`)<br><span class="hljs-keyword">VALUES</span><br>    (<span class="hljs-string">'7'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'ps 技术 '</span>);<br></code></pre></td></tr></tbody></table></figure><p>自己的表和自己的表连接，核心：<strong>一张表拆为两张一样的表即可</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span><br>    a.`categoryname` <span class="hljs-keyword">AS</span> a,<br>    b.`categoryname` <span class="hljs-keyword">AS</span> b<br><span class="hljs-keyword">FROM</span> category <span class="hljs-keyword">AS</span> a ,category <span class="hljs-keyword">AS</span> b<br><span class="hljs-keyword">WHERE</span> a.categoryid <span class="hljs-operator">=</span> b.pid;<br></code></pre></td></tr></tbody></table></figure><h2 id="分页和排序"><a href="#分页和排序" class="headerlink" title="分页和排序"></a>分页和排序</h2><blockquote><p>排序</p></blockquote><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 排序：升序 asc     降序 desc</span><br><span class="hljs-comment">-- ORDER BY 通过哪个字段排序，怎么排</span><br><span class="hljs-keyword">SELECT</span><br>    r.`studentno`,<br>    `studentname`,<br>    `subjectname`,<br>    `studentresult`<br><span class="hljs-keyword">FROM</span><br>    <span class="hljs-keyword">result</span> <span class="hljs-keyword">AS</span> r<br>        <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> student <span class="hljs-keyword">AS</span> s<br>                  <span class="hljs-keyword">ON</span> r.studentno <span class="hljs-operator">=</span> s.studentno<br>        <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> subject<br>                   <span class="hljs-keyword">ON</span> r.subjectno <span class="hljs-operator">=</span> subject.subjectno<br><span class="hljs-keyword">WHERE</span><br>    subjectname <span class="hljs-operator">=</span> <span class="hljs-string">' 数据库结构 - 1'</span><br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span><br>    studentresult <span class="hljs-keyword">ASC</span>; <span class="hljs-comment">-- DESC</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>分页</p></blockquote><p>缓解数据库压力，给人更好的体验</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 语法  limit 起始值，页面大小</span><br></code></pre></td></tr></tbody></table></figure><h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 查询 （学号 科目编号 数据库结构 - 1学生成绩） 的降序</span><br><span class="hljs-comment">-- 联表查询</span><br><span class="hljs-keyword">SELECT</span><br>    `studentno`,<br>    r.`subjectno`,<br>    `studentresult`<br><span class="hljs-keyword">FROM</span><br>    <span class="hljs-keyword">result</span> <span class="hljs-keyword">AS</span> r<br>        <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> subject <span class="hljs-keyword">AS</span> s<br>                   <span class="hljs-keyword">ON</span> r.subjectno <span class="hljs-operator">=</span> s.subjectno<br><span class="hljs-keyword">WHERE</span><br>    subjectname <span class="hljs-operator">=</span> <span class="hljs-string">' 数据库结构 - 1'</span><br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span><br>    studentresult <span class="hljs-keyword">DESC</span>;<br><br><span class="hljs-comment">-- 使用子查询</span><br><span class="hljs-keyword">SELECT</span><br>    `studentno`,<br>    `subjectno`,<br>    `studentresult`<br><span class="hljs-keyword">FROM</span><br>    <span class="hljs-keyword">result</span><br><span class="hljs-keyword">WHERE</span><br>        subjectno <span class="hljs-operator">=</span> (<br>        <span class="hljs-keyword">SELECT</span><br>            subjectno<br>        <span class="hljs-keyword">FROM</span><br>            subject<br>        <span class="hljs-keyword">WHERE</span><br>            subjectname <span class="hljs-operator">=</span> <span class="hljs-string">' 数据库结构 - 1'</span><br>    )<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span><br>    studentresult <span class="hljs-keyword">DESC</span>;<br></code></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 查询 （学号 数据库结构 - 1分数大于60的学生名字）</span><br><span class="hljs-comment">-- 子查询</span><br><span class="hljs-keyword">SELECT</span><br>    s.studentno,<br>    studentname<br><span class="hljs-keyword">FROM</span><br>    student <span class="hljs-keyword">AS</span> s<br>        <span class="hljs-keyword">RIGHT</span> <span class="hljs-keyword">JOIN</span> <span class="hljs-keyword">result</span> <span class="hljs-keyword">AS</span> r<br>                   <span class="hljs-keyword">ON</span> s.studentno <span class="hljs-operator">=</span> r.studentno<br><span class="hljs-keyword">WHERE</span><br>      studentresult <span class="hljs-operator">&gt;=</span> <span class="hljs-number">60</span><br>  <span class="hljs-keyword">AND</span> subjectno <span class="hljs-operator">=</span> (<br>    <span class="hljs-keyword">SELECT</span><br>        subjectno<br>    <span class="hljs-keyword">FROM</span><br>        `subject`<br>    <span class="hljs-keyword">WHERE</span><br>        subjectname <span class="hljs-operator">=</span> <span class="hljs-string">' 数据库结构 - 1'</span><br>);<br><br><span class="hljs-comment">-- 嵌套查询</span><br><span class="hljs-keyword">SELECT</span><br>    studentno,<br>    studentname<br><span class="hljs-keyword">FROM</span><br>    student<br><span class="hljs-keyword">WHERE</span><br>        studentno <span class="hljs-keyword">IN</span> (<br>        <span class="hljs-keyword">SELECT</span><br>            studentno<br>        <span class="hljs-keyword">FROM</span><br>            <span class="hljs-keyword">result</span><br>        <span class="hljs-keyword">WHERE</span><br><br>              studentresult <span class="hljs-operator">&gt;=</span> <span class="hljs-number">60</span><br>          <span class="hljs-keyword">AND</span> subjectno <span class="hljs-operator">=</span> (<br>            <span class="hljs-keyword">SELECT</span><br>                subjectno<br>            <span class="hljs-keyword">FROM</span><br>                subject<br>            <span class="hljs-keyword">WHERE</span><br>                subjectname <span class="hljs-operator">=</span> <span class="hljs-string">' 数据库结构 - 1'</span><br>        )<br>    );<br></code></pre></td></tr></tbody></table></figure><h2 id="分组和过滤"><a href="#分组和过滤" class="headerlink" title="分组和过滤"></a>分组和过滤</h2><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span><br>    subjectname,<br>    <span class="hljs-built_in">avg</span>(studentresult) <span class="hljs-keyword">AS</span> <span class="hljs-string">'平均分'</span>,<br>    <span class="hljs-built_in">max</span>(studentresult),<br>    <span class="hljs-built_in">min</span>(studentresult)<br><span class="hljs-keyword">FROM</span><br>    <span class="hljs-keyword">result</span> r<br>        <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> subject s<br>                   <span class="hljs-keyword">ON</span> r.subjectno <span class="hljs-operator">=</span> s.subjectno<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span><br>    subjectname<br><span class="hljs-keyword">HAVING</span><br>    平均分 <span class="hljs-operator">&gt;</span> <span class="hljs-number">80</span>;<br></code></pre></td></tr></tbody></table></figure><h1 id="MySQL函数"><a href="#MySQL函数" class="headerlink" title="MySQL函数"></a>MySQL 函数</h1><p>官网：<a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/sql-function-reference.html">https://dev.mysql.com/doc/refman/8.0/en/sql-function-reference.html</a></p><h2 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h2><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">abs</span>(<span class="hljs-number">-123</span>);   <span class="hljs-comment">-- 绝对值</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">ceiling</span>(<span class="hljs-number">9.3</span>); <span class="hljs-comment">-- 向上取整   10</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">floor</span>(<span class="hljs-number">9.3</span>); <span class="hljs-comment">-- 向下取整    9</span><br><span class="hljs-keyword">SELECT</span> rand();    <span class="hljs-comment">-- 随机数</span><br><span class="hljs-keyword">SELECT</span> sign(<span class="hljs-number">-2</span>);  <span class="hljs-comment">--判断一个数的符号   负数返回-1  正数返回  1     0返回0</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 字符串函数</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">char_length</span>(<span class="hljs-string">'hahahahahaha'</span>); <span class="hljs-comment">-- 字符串长度</span><br><span class="hljs-keyword">SELECT</span> concat(<span class="hljs-string">'hello'</span>, <span class="hljs-string">'world'</span>); <span class="hljs-comment">-- 拼接字符串</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">insert</span>(<span class="hljs-string">'我爱编程'</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">'可视化'</span>); <span class="hljs-comment">-- 在某一位置替换字符串</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">upper</span>(<span class="hljs-string">'asdasd'</span>); <span class="hljs-comment">-- 大写</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">lower</span>(<span class="hljs-string">'SADSAD'</span>); <span class="hljs-comment">-- 小写</span><br><span class="hljs-keyword">SELECT</span> instr(<span class="hljs-string">'sadasd'</span>, <span class="hljs-string">'d'</span>); <span class="hljs-comment">-- 3   返回第一次出现的位数</span><br><span class="hljs-keyword">SELECT</span> replace(<span class="hljs-string">'坚持就能成功'</span>,<span class="hljs-string">'坚持'</span>,<span class="hljs-string">'努力'</span>); <span class="hljs-comment">-- 替换第一次出现的字符串</span><br><span class="hljs-keyword">SELECT</span> substr(<span class="hljs-string">'sadsadasd'</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>); <span class="hljs-comment">-- 返回指定的子串(源字符串，截取的位置，截取的长度)</span><br><span class="hljs-keyword">SELECT</span> reverse(<span class="hljs-string">'asdasdsd'</span>); <span class="hljs-comment">-- 反转</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">current_time</span>(); <span class="hljs-comment">-- 获取当前时间</span><br><span class="hljs-keyword">SELECT</span> curdate(); <span class="hljs-comment">-- 获取当前日期</span><br><span class="hljs-keyword">SELECT</span> now();  <span class="hljs-comment">-- 获取当前日期时间</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">localtime</span>(); <span class="hljs-comment">-- 获取本地当前日期时间</span><br><span class="hljs-keyword">SELECT</span> sysdate(); <span class="hljs-comment">-- 获取系统当前日期时间</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">system_user</span>(); <span class="hljs-comment">-- 系统</span><br></code></pre></td></tr></tbody></table></figure><h2 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h2><table><thead><tr><th>函数名称</th><th>描述</th></tr></thead><tbody><tr><td>count（）</td><td>计数</td></tr><tr><td>sum（）</td><td>求和</td></tr><tr><td>avg（）</td><td>平均值</td></tr><tr><td>max（）</td><td>最大值</td></tr><tr><td>min（）</td><td>最小值</td></tr><tr><td>……</td><td>……</td></tr></tbody></table><p>count (字段名) 忽略 null</p><p>count (*) 和 count (1) 不忽略 null</p><h2 id="数据库级别的MD5加密"><a href="#数据库级别的MD5加密" class="headerlink" title="数据库级别的MD5加密"></a>数据库级别的 MD5 加密</h2><p>什么是 MD5？<br>主要增强算法复杂度和不可逆性。<br>MD5 不可逆，具体的值的 md5 是一样的<br>MD5 破解网站的原理，背后有一个字典，根据 MD5 加密后的值，返回加密前的值</p><h1 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h1><h2 id="什么是事务"><a href="#什么是事务" class="headerlink" title="什么是事务"></a>什么是事务</h2><p>要么都成功，要么都失败。</p><blockquote><p>事务的原则：ACID 原则 原子性，一致性，隔离性，持久性</p></blockquote><p>参考博文：<a target="_blank" rel="noopener" href="https://blog.csdn.net/dengjili/article/details/82468576">https://blog.csdn.net/dengjili/article/details/82468576</a></p><p><strong>原子性 (Atomicity)</strong></p><p>要么都成功，要么都失败。</p><p><strong>一致性 (Consistency)</strong></p><p>事务前后的数据完整性要保持一致</p><p><strong>隔离性（Isolation）</strong></p><p>事务的隔离性是多个用户并发访问数据库时，数据库为每一个用户开启的事务，不能被其他事务的操作数据所干扰，多个并发事务之间要相互隔离</p><p><strong>持久性（Durability）- 事务提交</strong></p><p>事务一旦提交则不可逆，被持久化到数据库中！</p><blockquote><p>隔离导致的一些问题</p></blockquote><p><strong>脏读：</strong></p><p>指一个事务读取了另外一个事务未提交的数据。</p><p><strong>不可重复读：</strong></p><p>在一个事务内读取表中的某一行数据，多次读取结果不同。（这个不一定是错误，只是某些场合不对）</p><p><strong>虚读（幻读）：</strong></p><p>是指在一个事务内读取到了别的事务插入的数据，导致前后读取不一致。</p><blockquote><p>执行事务</p></blockquote><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- mysql 默认开启事务自动提交</span><br><span class="hljs-comment">-- 手动处理事务</span><br><span class="hljs-comment">-- 1.关闭自动提交</span><br><span class="hljs-keyword">SET</span> AUTOCOMMIT <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><span class="hljs-comment">-- 2.事务开启 标记一个事务的开始</span><br><span class="hljs-keyword">START</span> TRANSACTION;<br><span class="hljs-comment">-- 3.提交</span><br><span class="hljs-keyword">COMMIT</span>;<br><span class="hljs-comment">-- 回滚</span><br><span class="hljs-keyword">ROLLBACK</span>;<br><span class="hljs-comment">-- 4.开启自动提交</span><br><span class="hljs-keyword">SET</span> AUTOCOMMIT <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br><br><span class="hljs-keyword">SAVEPOINT</span> 保存点名;  <span class="hljs-comment">-- 设置一个保存点</span><br><span class="hljs-keyword">ROLLBACK</span> <span class="hljs-keyword">TO</span> <span class="hljs-keyword">SAVEPOINT</span> 保存点名; <span class="hljs-comment">-- 回滚到保存点</span><br><span class="hljs-keyword">RELEASE</span> <span class="hljs-keyword">SAVEPOINT</span> 保存点名; <span class="hljs-comment">-- 删除一个保存点</span><br></code></pre></td></tr></tbody></table></figure><p>转账模拟：</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SAVEPOINT</span> 保存点名; <span class="hljs-comment">-- 设置一个保存点</span><br><span class="hljs-keyword">ROLLBACK</span> <span class="hljs-keyword">TO</span> <span class="hljs-keyword">SAVEPOINT</span> 保存点名; <span class="hljs-comment">-- 回滚到保存点</span><br><span class="hljs-keyword">RELEASE</span> <span class="hljs-keyword">SAVEPOINT</span> 保存点名; <span class="hljs-comment">-- 删除一个保存点</span><br><br><span class="hljs-keyword">CREATE</span> DATABASE bank <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8 <span class="hljs-keyword">COLLATE</span> utf8_general_ci;<br>USE bank;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> account<br>(<br>    `id`    <span class="hljs-type">INT</span>(<span class="hljs-number">3</span>)        <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,<br>    `name`  <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>)   <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    `money` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">9</span>, <span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-keyword">PRIMARY</span> KEY (`id`)<br>) ENGINE <span class="hljs-operator">=</span> innodb<br>  <span class="hljs-keyword">DEFAULT</span> CHARSET <span class="hljs-operator">=</span> utf8;<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span><br>    account(`name`, `money`)<br><span class="hljs-keyword">VALUES</span><br>    (<span class="hljs-string">'a'</span>, <span class="hljs-number">2000.00</span>),<br>    (<span class="hljs-string">'b'</span>, <span class="hljs-number">10000.00</span>);<br><br><span class="hljs-comment">-- 模拟转账：事务</span><br><span class="hljs-keyword">SET</span> AUTOCOMMIT <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">-- 关闭自动提交</span><br><span class="hljs-keyword">START</span> TRANSACTION;<span class="hljs-comment">-- 开启事务</span><br><span class="hljs-keyword">UPDATE</span> account<br><span class="hljs-keyword">SET</span><br>    money <span class="hljs-operator">=</span> money <span class="hljs-operator">-</span> <span class="hljs-number">500</span><br><span class="hljs-keyword">WHERE</span><br>    name <span class="hljs-operator">=</span> <span class="hljs-string">'a'</span>;<br><span class="hljs-keyword">UPDATE</span> account<br><span class="hljs-keyword">SET</span><br>    money<br>        <span class="hljs-operator">=</span> money <span class="hljs-operator">+</span> <span class="hljs-number">500</span><br><span class="hljs-keyword">WHERE</span><br>    name <span class="hljs-operator">=</span> <span class="hljs-string">'b'</span>;<br><span class="hljs-keyword">ROLLBACK</span>; <span class="hljs-comment">-- 失败回滚</span><br><span class="hljs-keyword">COMMIT</span>; <span class="hljs-comment">-- 成功提交</span><br><span class="hljs-keyword">SET</span> AUTOCOMMIT <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; <span class="hljs-comment">-- 开启自动提交</span><br></code></pre></td></tr></tbody></table></figure><h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><blockquote><p>MSQL 官方对索引的定义为：<strong>索引（index）是帮助 MySQL 高效获取数据的数据结构。</strong>提取句子主干，就可以得到索引的本质：索引是数据结构。</p></blockquote><h2 id="索引的分类"><a href="#索引的分类" class="headerlink" title="索引的分类"></a>索引的分类</h2><ul><li>主键索引（primary key）<ul><li>唯一的标识，逐渐不可重复</li></ul></li><li>唯一索引（unique key）<ul><li>避免重复的列出现，唯一索引可以重复，多个列都可以标识为 唯一索引</li></ul></li><li>常规索引（key /index）<ul><li>默认的，index /key 关键字设置</li></ul></li><li>全文索引（FullText）<ul><li>在特定的数据库引擎下才有 myisam</li><li>快速定位数据</li></ul></li></ul><p>索引的使用</p><ol><li><p>在创建表的时候给字段增加索引</p></li><li><p>创建完毕后，增加索引</p><p>alter table 表。字段 add [fulltext] index 索引名（列名）</p></li><li><p>create index 索引名 on 表（字段）</p></li></ol><p>索引命名： i<code>_</code>表名<code>_</code>字段</p><p>索引在数据量小的时候不明显，但在数据量大时十分明显</p><h2 id="索引原则"><a href="#索引原则" class="headerlink" title="索引原则"></a>索引原则</h2><ul><li>索引不是越多越好</li><li>不要对经常变动的数据加索引</li><li>小数据量的表不要加索引</li><li>索引一般加在常用来查询的字段上</li></ul><p>参考：<a target="_blank" rel="noopener" href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html">http://blog.codinglabs.org/articles/theory-of-mysql-index.html</a></p><blockquote><p>索引的数据结构</p></blockquote><p>hash 类型的索引</p><p>btree：innodb 默认的数据结构</p><h1 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h1><h2 id="用户管理-权限管理"><a href="#用户管理-权限管理" class="headerlink" title="用户管理 权限管理"></a>用户管理 权限管理</h2><blockquote><p>sql 命令</p></blockquote><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 创建用户   CREATE USER 用户名 IDENTIFIED BY 密码;</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> zhang IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">'123456'</span>;<br><span class="hljs-comment">-- 修改密码</span><br><span class="hljs-keyword">SET</span> PASSWORD <span class="hljs-keyword">FOR</span> zhang <span class="hljs-operator">=</span> <span class="hljs-string">'111111'</span>;<br><span class="hljs-comment">-- 重命名</span><br>RENAME <span class="hljs-keyword">USER</span> zhang <span class="hljs-keyword">TO</span> liu;<br><span class="hljs-comment">-- 用户授权 *.*（库.表）代表全部权限 除了给其他用户授权</span><br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> PRIVILEGES <span class="hljs-keyword">ON</span> <span class="hljs-operator">*</span>.<span class="hljs-operator">*</span> <span class="hljs-keyword">TO</span> liu;<br><span class="hljs-comment">-- 查询权限</span><br><span class="hljs-keyword">SHOW</span> GRANTS <span class="hljs-keyword">FOR</span> liu;<br><span class="hljs-keyword">SHOW</span> GRANTS <span class="hljs-keyword">FOR</span> root<span class="hljs-variable">@localhost</span>;<br><span class="hljs-comment">-- 撤销权限</span><br><span class="hljs-keyword">REVOKE</span> <span class="hljs-keyword">ALL</span> PRIVILEGES <span class="hljs-keyword">ON</span> <span class="hljs-operator">*</span>.<span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> liu;<br><span class="hljs-comment">-- 删除用户</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">USER</span> liu;<br></code></pre></td></tr></tbody></table></figure><h2 id="MySQL备份"><a href="#MySQL备份" class="headerlink" title="MySQL备份"></a>MySQL 备份</h2><p>为什么要备份：</p><ul><li>保证重要的数据不丢失</li><li>数据转移</li></ul><p>MySQL 数据库备份的方式</p><ul><li>可视化工具手动导出</li><li>拷贝物理文件</li><li>命令行导出 mysqldump</li></ul><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysqldump <span class="hljs-operator">-</span>hlocalhost <span class="hljs-operator">-</span>uroot <span class="hljs-operator">-</span>proot 数据库名 表名 <span class="hljs-operator">&gt;</span>位置<br></code></pre></td></tr></tbody></table></figure><h1 id="数据库的规约"><a href="#数据库的规约" class="headerlink" title="数据库的规约"></a>数据库的规约</h1><h2 id="为什么需要设计"><a href="#为什么需要设计" class="headerlink" title="为什么需要设计"></a>为什么需要设计</h2><p>当数据库比较复杂时，需要设计</p><p><strong>糟糕的数据库设计：</strong></p><ul><li>数据冗余，浪费空间</li><li>数据库插入和删除都会麻烦、异常</li><li>程序性能差</li></ul><p><strong>良好的数据库设计：</strong></p><ul><li>节省内存空间</li><li>保证数据库的完整性</li><li>方便我们开发系统</li></ul><p><strong>软件开发中，关于数据库的设计：</strong></p><ul><li>分析需求：分析业务和需要处理的数据库的需求</li><li>概要设计：设计关系图 E-R 图</li></ul><p><strong>设计数据库的步骤：</strong>（个人博客）</p><ul><li><p>收集信息，分析需求</p><ul><li>用户表（用户登录注销，用户个人信息，写博客，创建分类）</li><li>分类表（文章分类，谁创建的）</li><li>文章表（文章的信息）</li><li>评论表</li><li>友链表（友链信息）</li><li>自定义表（系统信息，某个关键的字，或者一些主字段） key：value</li><li>说说表（id、content、create_time）</li></ul></li><li><p>标识实体（具体需求到字段）</p></li><li><p>标识实体间的关系</p><ul><li>写博客：user&gt;blog</li><li>创建分类：user&gt;categroy</li><li>关注：user&gt;user</li><li>友链：links</li><li>评论：user&gt;user-blog</li></ul></li></ul><h2 id="三大范式"><a href="#三大范式" class="headerlink" title="三大范式"></a>三大范式</h2><p><strong>为什么需要数据规范化？</strong></p><ul><li>信息重复</li><li>更新异常</li><li>插入异常<ul><li>无法正常显示信息</li></ul></li><li>删除异常<ul><li>丢失有效信息</li></ul></li></ul><p><strong>第一范式（1NF） 要求数据库表的每一列都是不可分割的原子数据项。</strong></p><p>原子性：保证每一列不可再分</p><p><strong>第二范式（2NF） 在 1NF 的基础上，非码属性必须完全依赖于候选码（在 1NF 基础上消除非主属性对主码的部分函数依赖）第二范式需要确保数据库表中的每一列都和主键相关，而不能只与主键的某一部分相关（主要针对联合主键而言）。</strong></p><p>前提：满足第一范式</p><p>每张表只做一件事</p><p><strong>第三范式（3NF） 属性不依赖于其它非主属性 属性直接依赖于主键</strong></p><p><strong>规范性和性能问题</strong></p><p>关联查询的表不得超过三张</p><ul><li>考虑商业化的需求和目标（成本，用户体验）</li><li>在规范性能的问题的时候，需要适当的考虑一下规范性</li><li>故意给某些表增加一些冗余的字段。（从多表查询中变为单表查询）</li><li>故意增加一些计算列（从大数据量降低为小数据量的査询：索引）</li></ul><h1 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h1><h2 id="数据库驱动"><a href="#数据库驱动" class="headerlink" title="数据库驱动"></a>数据库驱动</h2><p>驱动：连接应用程序与数据库</p><h2 id="JDBC-1"><a href="#JDBC-1" class="headerlink" title="JDBC"></a>JDBC</h2><p>SUN 公司为了简化开发人员的操作，提供了一个（Java 操作数据库的）规范 JDBC</p><p>对于开发人员来说只需要掌握 JDBC 接口的操作即可</p><p>需要了解两个包：java.sql javax.sql</p><p>一个驱动包</p><h2 id="第一个JDBC程序"><a href="#第一个JDBC程序" class="headerlink" title="第一个JDBC程序"></a>第一个 JDBC 程序</h2><blockquote><p>创建测试数据库</p></blockquote><ol><li><p>创建一个普通项目</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE DATABASE `jdbcStudy` CHARACTER SET utf8 COLLATE utf8_general_ci;<br><br>USE `jdbcStudy`;<br><br>CREATE TABLE `users`<br>(<br>    `id`       INT PRIMARY KEY,<br>    `NAME`     VARCHAR(40),<br>    `PASSWORD` VARCHAR(40),<br>    `email`    VARCHAR(60),<br>    birthday   DATE<br>);<br><br>INSERT INTO `users`(`id`, `NAME`, `PASSWORD`, `email`, `birthday`)<br>VALUES ('1', 'zhangsan', '123456', 'zs@sina.com', '1980-12-04'),<br>       ('2', 'lisi', '123456', 'lisi@sina.com', '1981-12-04'),<br>       ('3', 'wangwu', '123456', 'wangwu@sina.com', '1979-12-04')<br></code></pre></td></tr></tbody></table></figure></li><li><p>导入数据库驱动<br><img src="https://inencoding.oss-cn-shenzhen.aliyuncs.com/img/20220430185606.png" srcset="/img/loading.gif" lazyload alt="image-20210510145833850"></p></li><li><p>编写测试代码</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.demo01;<br><br><span class="hljs-keyword">import</span> com.mysql.jdbc.Driver;<br><br><span class="hljs-keyword">import</span> java.sql.*;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> AWEI</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 2021/5/10</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-comment">//我的第一个JDBC程序</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JDBCFirstDemo</span> {<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> ClassNotFoundException, SQLException {<br>		<span class="hljs-comment">//1.加载驱动</span><br>		Class.forName(<span class="hljs-string">"com.mysql.cj.jdbc.Driver"</span>);<span class="hljs-comment">//利用反射加载驱动</span><br><br>		<span class="hljs-comment">//2.用户信息和url</span><br>		<span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"jdbc:mysql://localhost:3306/jdbcStudy?serverTimezone=Asia/Shanghai&amp;useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true"</span>;<br>		<span class="hljs-comment">//serverTimezone=Asia/Shanghai    mysql8需要加时区</span><br>		<span class="hljs-comment">//useUnicode=true   使用Unicode编码</span><br>		<span class="hljs-comment">//characterEncoding=utf8    设置utf8编码</span><br>		<span class="hljs-comment">//useSSL=true   使用安全的连接</span><br>		<span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-string">"root"</span>;<br>		<span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">"root"</span>;<br><br>		<span class="hljs-comment">//3.连接成功,数据库对象 connection 代表数据库</span><br>		<span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, username, password);<br><br>		<span class="hljs-comment">//4.执行sql对象 statement 执行sql</span><br>		<span class="hljs-type">Statement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> connection.createStatement();<br><br>		<span class="hljs-comment">//5.执行sql对象去执行sql</span><br>		<span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT * FROM Users"</span>;<br>		<span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> statement.executeQuery(sql);<span class="hljs-comment">//返回的结果集，结果集中封装了我们全部查询出来的结果</span><br>		<span class="hljs-keyword">while</span> (resultSet.next()) {<br>			System.out.println(<span class="hljs-string">"id="</span> + resultSet.getObject(<span class="hljs-string">"id"</span>));<br>			System.out.println(<span class="hljs-string">"name="</span> + resultSet.getObject(<span class="hljs-string">"NAME"</span>));<br>			System.out.println(<span class="hljs-string">"password="</span> + resultSet.getObject(<span class="hljs-string">"PASSWORD"</span>));<br>			System.out.println(<span class="hljs-string">"email="</span> + resultSet.getObject(<span class="hljs-string">"email"</span>));<br>			System.out.println(<span class="hljs-string">"birthday="</span> + resultSet.getObject(<span class="hljs-string">"birthday"</span>));<br>			System.out.println(<span class="hljs-string">"=========================================================="</span>);<br>		}<br><br>		<span class="hljs-comment">//6.关闭数据库连接</span><br>		resultSet.close();<br>		statement.close();<br>		connection.close();<br>	}<br>}<br><br></code></pre></td></tr></tbody></table></figure><p>运行结果：</p><p><img src="https://inencoding.oss-cn-shenzhen.aliyuncs.com/img/20220430185552.png" srcset="/img/loading.gif" lazyload alt="image-20210510152521230"></p></li></ol><p>步骤总结：</p><ol><li><p>加载驱动</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">Class.forName(<span class="hljs-string">"com.mysql.cj.jdbc.Driver"</span>);<span class="hljs-comment">//利用反射加载驱动</span><br></code></pre></td></tr></tbody></table></figure></li><li><p>连接数据库 DriverManage</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span><span class="hljs-string">"jdbc:mysql://localhost:3306/jdbcStudy?serverTimezone=Asia/Shanghai&amp;useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true"</span>;<br><span class="hljs-comment">//serverTimezone=Asia/Shanghai    mysql8需要加时区</span><br><span class="hljs-comment">//useUnicode=true   使用Unicode编码</span><br><span class="hljs-comment">//characterEncoding=utf8    设置utf8编码</span><br><span class="hljs-comment">//useSSL=true   使用安全的连接</span><br><span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-string">"root"</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">"root"</span>;<br><br><span class="hljs-comment">//3.连接成功,数据库对象 connection 代表数据库</span><br><span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, username, password);<br></code></pre></td></tr></tbody></table></figure></li><li><p>获得执行 sql 的对象 Statement/prepareStatement</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Statement</span> <span class="hljs-variable">statement</span> <span class="hljs-operator">=</span> connection.createStatement();<br></code></pre></td></tr></tbody></table></figure></li><li><p>获得返回的结果集</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT * FROM Users"</span>;<br>		<span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> statement.executeQuery(sql);<span class="hljs-comment">//返回的结果集，结果集中封装了我们全部查询出来的结果</span><br>		<span class="hljs-keyword">while</span> (resultSet.next()) {<br>			System.out.println(<span class="hljs-string">"id="</span> + resultSet.getObject(<span class="hljs-string">"id"</span>));<br>			System.out.println(<span class="hljs-string">"name="</span> + resultSet.getObject(<span class="hljs-string">"NAME"</span>));<br>			System.out.println(<span class="hljs-string">"password="</span> + resultSet.getObject(<span class="hljs-string">"PASSWORD"</span>));<br>			System.out.println(<span class="hljs-string">"email="</span> + resultSet.getObject(<span class="hljs-string">"email"</span>));<br>			System.out.println(<span class="hljs-string">"birthday="</span> + resultSet.getObject(<span class="hljs-string">"birthday"</span>));<br>			System.out.println(<span class="hljs-string">"=========================================================="</span>);<br>		}<br></code></pre></td></tr></tbody></table></figure></li><li><p>关闭连接</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">resultSet.close();<br>statement.close();<br>connection.close();<br></code></pre></td></tr></tbody></table></figure></li></ol><h2 id="statement对象"><a href="#statement对象" class="headerlink" title="statement对象"></a>statement 对象</h2><p>JDBC 中的 Statement 对象用于向数据库发送 sql 语句，想完成对数据库的增删改查，只需要通过这个对象向数据库发送增删改查语句即可</p><p>Statement 对象的 executeUpdate 方法，用于向数据库发送增、删、改的 sql 语句，executeUpdate 执行完之后，将会返回一个整数（即增删改语句导致了数据库几行数据发生了变化）</p><p>Statement.executeQuery 方法用于向数据库发送查询语句，executeQuery 方法返回查询结果的 ResultSet 对象</p><blockquote><p>代码实现</p></blockquote><ol><li><p>提取工具类</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.demo02.utils;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.sql.*;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> AWEI</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 2021/5/11</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdbcUtils</span> {<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>	<span class="hljs-keyword">static</span> {<br>		<span class="hljs-keyword">try</span> {<br>			<span class="hljs-type">InputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> JdbcUtils.class.getClassLoader().getResourceAsStream(<span class="hljs-string">"db.properties"</span>);<br>			<span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>			properties.load(in);<br>			driver = properties.getProperty(<span class="hljs-string">"driver"</span>);<br>			url = properties.getProperty(<span class="hljs-string">"url"</span>);<br>			username = properties.getProperty(<span class="hljs-string">"username"</span>);<br>			password = properties.getProperty(<span class="hljs-string">"password"</span>);<br><br>			<span class="hljs-comment">//加载驱动</span><br>			Class.forName(driver);<br>		} <span class="hljs-keyword">catch</span> (Exception e) {<br>			e.printStackTrace();<br>		}<br>	}<br><br>	<span class="hljs-comment">//获取连接</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Connection <span class="hljs-title function_">getConnection</span> <span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException {<br>		<span class="hljs-keyword">return</span> DriverManager.getConnection(url, username, password);<br>	}<br><br>	<span class="hljs-comment">//释放资源</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">release</span> <span class="hljs-params">(Connection conn, Statement st, ResultSet rs)</span> {<br>		<span class="hljs-keyword">if</span> (rs != <span class="hljs-literal">null</span>) {<br>			<span class="hljs-keyword">try</span> {<br>				rs.close();<br>			} <span class="hljs-keyword">catch</span> (SQLException throwables) {<br>				throwables.printStackTrace();<br>			}<br>		}<br>		<span class="hljs-keyword">if</span> (st != <span class="hljs-literal">null</span>) {<br>			<span class="hljs-keyword">try</span> {<br>				st.close();<br>			} <span class="hljs-keyword">catch</span> (SQLException throwables) {<br>				throwables.printStackTrace();<br>			}<br>		}<br>		<span class="hljs-keyword">if</span> (conn != <span class="hljs-literal">null</span>) {<br>			<span class="hljs-keyword">try</span> {<br>				conn.close();<br>			} <span class="hljs-keyword">catch</span> (SQLException throwables) {<br>				throwables.printStackTrace();<br>			}<br>		}<br>	}<br>}<br><br></code></pre></td></tr></tbody></table></figure></li><li><p>编写增删改查的方法：executeUpdate executeQuery<br>增：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.demo02.utils;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.sql.Statement;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> AWEI</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 2021/5/11</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestInsert</span> {<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(String[] args)</span> {<br>		<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">Statement</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-keyword">try</span> {<br>			conn = JdbcUtils.getConnection(); <span class="hljs-comment">// 获取数据库连接</span><br>			st = conn.createStatement();<br>			<span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"INSERT INTO Users(Id, Name, Password, Email, Birthday) VALUES (4, '张三', '123456', '123123123@qq.com', '2020-12-1')"</span>;<br>			<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> st.executeUpdate(sql);<br>			<span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>) {<br>				System.out.println(<span class="hljs-string">"插入成功!"</span>);<br>			}<br>		} <span class="hljs-keyword">catch</span> (SQLException throwables) {<br>			throwables.printStackTrace();<br>		} <span class="hljs-keyword">finally</span> {<br>			JdbcUtils.release(conn, st, rs);<br>		}<br>	}<br>}<br><br></code></pre></td></tr></tbody></table></figure><p>删：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.demo02.utils;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.sql.Statement;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> AWEI</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 2021/5/11</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestDelete</span> {<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(String[] args)</span> {<br>		<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">Statement</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-keyword">try</span> {<br>			conn = JdbcUtils.getConnection(); <span class="hljs-comment">// 获取数据库连接</span><br>			st = conn.createStatement();<br>			<span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"DELETE FROM Users WHERE Id=4"</span>;<br>			<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> st.executeUpdate(sql);<br>			<span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>) {<br>				System.out.println(<span class="hljs-string">"删除成功!"</span>);<br>			}<br>		} <span class="hljs-keyword">catch</span> (SQLException throwables) {<br>			throwables.printStackTrace();<br>		} <span class="hljs-keyword">finally</span> {<br>			JdbcUtils.release(conn, st, rs);<br>		}<br>	}<br>}<br><br></code></pre></td></tr></tbody></table></figure><p>改：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.demo02.utils;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.sql.Statement;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> AWEI</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 2021/5/11</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestUpdate</span> {<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(String[] args)</span> {<br>		<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">Statement</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-keyword">try</span> {<br>			conn = JdbcUtils.getConnection(); <span class="hljs-comment">// 获取数据库连接</span><br>			st = conn.createStatement();<br>			<span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"UPDATE Users SET Name = '李四',Email = 'ssadsad@qq.com' WHERE Id =1;"</span>;<br>			<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> st.executeUpdate(sql);<br>			<span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>) {<br>				System.out.println(<span class="hljs-string">"更新成功!"</span>);<br>			}<br>		} <span class="hljs-keyword">catch</span> (SQLException throwables) {<br>			throwables.printStackTrace();<br>		} <span class="hljs-keyword">finally</span> {<br>			JdbcUtils.release(conn, st, rs);<br>		}<br>	}<br>}<br><br></code></pre></td></tr></tbody></table></figure><p>查：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.demo02.utils;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.sql.Statement;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> AWEI</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 2021/5/11</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestSelect</span> {<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(String[] args)</span> {<br>		<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">Statement</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-keyword">try</span> {<br>			conn = JdbcUtils.getConnection();<br>			st = conn.createStatement();<br>			<span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT * FROM Users WHERE Id = 1"</span>;<br>			rs = st.executeQuery(sql);<br>			<span class="hljs-keyword">while</span> (rs.next()) {<br>				System.out.println(rs.getString(<span class="hljs-string">"NAME"</span>));<br>			}<br>		} <span class="hljs-keyword">catch</span> (SQLException throwables) {<br>			throwables.printStackTrace();<br>		} <span class="hljs-keyword">finally</span> {<br>			JdbcUtils.release(conn, st, rs);<br>		}<br>	}<br>}<br><br></code></pre></td></tr></tbody></table></figure></li></ol><h2 id="SQL注入问题"><a href="#SQL注入问题" class="headerlink" title="SQL注入问题"></a>SQL 注入问题</h2><p>sql 存在漏洞，会被攻击导致数据泄露（SQL 存在拼接情况）</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.demo02.utils;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.sql.Statement;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> AWEI</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 2021/5/11</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SQLinjection</span> {<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(String[] args)</span> {<br>		login(<span class="hljs-string">"'or'1=1"</span>, <span class="hljs-string">"126'or'1=1"</span>);<br>	}<br><br>	<span class="hljs-comment">//登陆业务</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">login</span> <span class="hljs-params">(String username, String password)</span> {<br>		<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">Statement</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-keyword">try</span> {<br>			conn = JdbcUtils.getConnection();<br>			st = conn.createStatement();<br>			<span class="hljs-comment">//SELECT * FROM users WHERE name = '' AND password = ''</span><br>			<span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT * FROM Users WHERE name = '"</span> + username + <span class="hljs-string">"' AND password = '"</span> + password + <span class="hljs-string">"'"</span>;<br>			rs = st.executeQuery(sql);<br>			<span class="hljs-keyword">while</span> (rs.next()) {<br>				System.out.println(rs.getString(<span class="hljs-string">"NAME"</span>));<br>				System.out.println(rs.getString(<span class="hljs-string">"password"</span>));<br>				System.out.println(<span class="hljs-string">"===================================="</span>);<br>			}<br>		} <span class="hljs-keyword">catch</span> (SQLException throwables) {<br>			throwables.printStackTrace();<br>		} <span class="hljs-keyword">finally</span> {<br>			JdbcUtils.release(conn, st, rs);<br>		}<br>	}<br>}<br><br></code></pre></td></tr></tbody></table></figure><h2 id="PreparedStatement"><a href="#PreparedStatement" class="headerlink" title="PreparedStatement"></a>PreparedStatement</h2><p>PreparedStatement 可以防止 SQL 注入 效率更高</p><ol><li><p>增</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.demo03;<br><br><span class="hljs-keyword">import</span> com.demo02.utils.JdbcUtils;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.PreparedStatement;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> AWEI</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 2021/5/12</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestInsert</span> {<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(String[] args)</span> {<br>		<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-keyword">try</span> {<br>			conn = JdbcUtils.getConnection();<br><br>			<span class="hljs-comment">//区别</span><br>			<span class="hljs-comment">//使用？代替参数</span><br>			<span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"INSERT INTO Users(Id, Name, Password, Email, Birthday) VALUES (?,?,?,?,?)"</span>;<br>			st = conn.prepareStatement(sql);<span class="hljs-comment">//预编译SQL，先写SQL，不执行</span><br><br>			<span class="hljs-comment">//手动给参数赋值</span><br>			st.setInt(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>);<br>			st.setString(<span class="hljs-number">2</span>, <span class="hljs-string">"zlw"</span>);<br>			st.setString(<span class="hljs-number">3</span>, <span class="hljs-string">"123212"</span>);<br>			st.setString(<span class="hljs-number">4</span>, <span class="hljs-string">"123123123@qq.com"</span>);<br>			<span class="hljs-comment">//注意点：sql.Date    数据库       java.sql.Date()</span><br>			<span class="hljs-comment">//       util.Date   Java       new Date().getTime()    获得时间戳</span><br>			st.setDate(<span class="hljs-number">5</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.sql.Date(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().getTime()));<br><br>			<span class="hljs-comment">//执行</span><br>			<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> st.executeUpdate();<br>			<span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>) {<br>				System.out.println(<span class="hljs-string">"插入成功"</span>);<br>			}<br>		} <span class="hljs-keyword">catch</span> (SQLException throwables) {<br>			throwables.printStackTrace();<br>		} <span class="hljs-keyword">finally</span> {<br>			JdbcUtils.release(conn, st, rs);<br>		}<br>	}<br>}<br><br></code></pre></td></tr></tbody></table></figure></li><li><p>删</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.demo03;<br><br><span class="hljs-keyword">import</span> com.demo02.utils.JdbcUtils;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.PreparedStatement;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> AWEI</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 2021/5/12</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestDelete</span> {<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(String[] args)</span> {<br>		<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-keyword">try</span> {<br>			conn = JdbcUtils.getConnection();<br><br>			<span class="hljs-comment">//区别</span><br>			<span class="hljs-comment">//使用？代替参数</span><br>			<span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"DELETE FROM Users WHERE Id=?"</span>;<br>			st = conn.prepareStatement(sql);<span class="hljs-comment">//预编译SQL，先写SQL，不执行</span><br><br>			<span class="hljs-comment">//手动给参数赋值</span><br>			st.setInt(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>);<br><br>			<span class="hljs-comment">//执行</span><br>			<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> st.executeUpdate();<br>			<span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>) {<br>				System.out.println(<span class="hljs-string">"删除成功"</span>);<br>			}<br>		} <span class="hljs-keyword">catch</span> (SQLException throwables) {<br>			throwables.printStackTrace();<br>		} <span class="hljs-keyword">finally</span> {<br>			JdbcUtils.release(conn, st, rs);<br>		}<br>	}<br>}<br><br></code></pre></td></tr></tbody></table></figure></li><li><p>改</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.demo03;<br><br><span class="hljs-keyword">import</span> com.demo02.utils.JdbcUtils;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.PreparedStatement;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> AWEI</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 2021/5/12</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestUpdate</span> {<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(String[] args)</span> {<br>		<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-keyword">try</span> {<br>			conn = JdbcUtils.getConnection();<br><br>			<span class="hljs-comment">//区别</span><br>			<span class="hljs-comment">//使用？代替参数</span><br>			<span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"UPDATE Users SET Name = ? WHERE Id =?"</span>;<br>			st = conn.prepareStatement(sql);<span class="hljs-comment">//预编译SQL，先写SQL，不执行</span><br><br>			<span class="hljs-comment">//手动给参数赋值</span><br>			st.setString(<span class="hljs-number">1</span>, <span class="hljs-string">"测试"</span>);<br>			st.setInt(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>);<br><br>			<span class="hljs-comment">//执行</span><br>			<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> st.executeUpdate();<br>			<span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>) {<br>				System.out.println(<span class="hljs-string">"更新成功"</span>);<br>			}<br>		} <span class="hljs-keyword">catch</span> (SQLException throwables) {<br>			throwables.printStackTrace();<br>		} <span class="hljs-keyword">finally</span> {<br>			JdbcUtils.release(conn, st, rs);<br>		}<br>	}<br>}<br><br></code></pre></td></tr></tbody></table></figure></li><li><p>查</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.demo03;<br><br><span class="hljs-keyword">import</span> com.demo02.utils.JdbcUtils;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.PreparedStatement;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> AWEI</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 2021/5/12</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestSelect</span> {<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(String[] args)</span> {<br>		<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-keyword">try</span> {<br>			conn = JdbcUtils.getConnection();<br>			<span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT * FROM Users WHERE Id = ?"</span>; <span class="hljs-comment">//编写SQL</span><br>			st = conn.prepareStatement(sql); <span class="hljs-comment">//预编译</span><br>			st.setInt(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">//传递参数</span><br>			<span class="hljs-comment">//执行</span><br>			rs = st.executeQuery();<br>			<span class="hljs-keyword">while</span> (rs.next()) {<br>				System.out.println(rs.getString(<span class="hljs-string">"NAME"</span>));<br>			}<br>		} <span class="hljs-keyword">catch</span> (SQLException throwables) {<br>			throwables.printStackTrace();<br>		}<span class="hljs-keyword">finally</span> {<br>		    JdbcUtils.release(conn,st,rs);<br>		}<br><br>	}<br>}<br><br></code></pre></td></tr></tbody></table></figure></li><li><p>防止 sql 注入</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.demo03;<br><br><span class="hljs-keyword">import</span> com.demo02.utils.JdbcUtils;<br><br><span class="hljs-keyword">import</span> java.sql.*;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> AWEI</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 2021/5/12</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SQLinjection</span> {<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(String[] args)</span> {<br>		<span class="hljs-comment">//login("''or1=1", "''or1=1");</span><br>		login(<span class="hljs-string">"测试"</span>, <span class="hljs-string">"123456"</span>);<br>	}<br><br>	<span class="hljs-comment">//登陆业务</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">login</span> <span class="hljs-params">(String username, String password)</span> {<br>		<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-keyword">try</span> {<br>			conn = JdbcUtils.getConnection();<br><br>			<span class="hljs-comment">//PreparedStatement 防止SQL注入的本质，把传递进来的参数当作字符</span><br>			<span class="hljs-comment">//假设其中存在转义字符，比如说 ‘ 会被直接转义</span><br>			<span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT * FROM Users WHERE Name = ? AND Password = ?"</span>;<br>			st = conn.prepareStatement(sql);<br>			st.setString(<span class="hljs-number">1</span>, username);<br>			st.setString(<span class="hljs-number">2</span>, password);<br>			rs = st.executeQuery();<br>			<span class="hljs-keyword">while</span> (rs.next()) {<br>				System.out.println(rs.getString(<span class="hljs-string">"NAME"</span>));<br>				System.out.println(rs.getString(<span class="hljs-string">"password"</span>));<br>				System.out.println(<span class="hljs-string">"===================================="</span>);<br>			}<br>		} <span class="hljs-keyword">catch</span> (SQLException throwables) {<br>			throwables.printStackTrace();<br>		} <span class="hljs-keyword">finally</span> {<br>			JdbcUtils.release(conn, st, rs);<br>		}<br>	}<br>}<br><br></code></pre></td></tr></tbody></table></figure><p>正常业务：</p><p><img src="https://inencoding.oss-cn-shenzhen.aliyuncs.com/img/20220430185556.png" srcset="/img/loading.gif" lazyload alt="image-20210512012307042"></p><p>sql 注入结果:<img src="https://inencoding.oss-cn-shenzhen.aliyuncs.com/img/20220430185601.png" srcset="/img/loading.gif" lazyload alt="image-20210512012234969"></p></li></ol><h2 id="事务-1"><a href="#事务-1" class="headerlink" title="事务"></a>事务</h2><blockquote><p>ACID 原则</p></blockquote><p>原则性：要么全部完成，要么都不完成。</p><p>一致性：总数不变</p><p><strong>隔离性：多个进程互不干扰</strong></p><p>持久性：一旦提交不可逆，持久化到数据库了</p><p><strong>隔离性的问题</strong>：</p><p>脏读：一个事务读取了另一个没有提交的事务</p><p>不可重复读：在同一个事务内，重复读取表中的数据，表数据发生了改变</p><p>虚读（幻读）：在一个事务内，读取到了别人插入的数据，导致前后结果不一致</p><blockquote><p>代码实现</p></blockquote><ol><li><p>开启事务</p></li><li><p>一组业务执行完毕，提交事务</p></li><li><p>可以在 try catch 语句中显示的定义回滚语句，但默认自动回滚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> com.demo04;<br><br><span class="hljs-keyword">import</span> com.demo02.utils.JdbcUtils;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.PreparedStatement;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> AWEI</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 2021/5/15</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestTransaction1</span> {<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(String[] args)</span> {<br>		<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">st</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-keyword">try</span> {<br>			conn = JdbcUtils.getConnection();<br>			<span class="hljs-comment">//关闭数据库的自动提交，自动开启事务</span><br>			conn.setAutoCommit(<span class="hljs-literal">false</span>);<br>			<span class="hljs-type">String</span> <span class="hljs-variable">sql1</span> <span class="hljs-operator">=</span> <span class="hljs-string">"UPDATE Account SET Money = Money-100 WHERE Name = 'A'"</span>;<br>			st = conn.prepareStatement(sql1);<br>			st.executeUpdate();<br>			<span class="hljs-type">String</span> <span class="hljs-variable">sql2</span> <span class="hljs-operator">=</span> <span class="hljs-string">"UPDATE Account SET Money = Money+100 WHERE Name = 'B'"</span>;<br>			st = conn.prepareStatement(sql2);<br>			st.executeUpdate();<br>			<span class="hljs-comment">//业务完成，提交事务</span><br>			conn.commit();<br>			System.out.println(<span class="hljs-string">"成功!"</span>);<br>		} <span class="hljs-keyword">catch</span> (SQLException throwables) {<br>			<span class="hljs-keyword">try</span> {<br>				conn.rollback();<span class="hljs-comment">//失败回滚   （可省略 自动执行回滚）</span><br>			} <span class="hljs-keyword">catch</span> (SQLException e) {<br>				e.printStackTrace();<br>			}<br>			throwables.printStackTrace();<br>		} <span class="hljs-keyword">finally</span> {<br>			JdbcUtils.release(conn, st, rs);<br>		}<br>	}<br>}<br><br></code></pre></td></tr></tbody></table></figure></li></ol><h2 id="数据库连接池"><a href="#数据库连接池" class="headerlink" title="数据库连接池"></a>数据库连接池</h2><p>数据库连接 —— 执行 —— 释放 的方式十分浪费系统资源，所以运用池化技<strong>术</strong></p><p><strong>池化技术：准备一些预先的资源，过来就连接预先准备好的</strong></p><p>编写连接池只需要实现一个接口：DataSource</p><blockquote><p>开源数据源实现</p></blockquote><p>DBCP</p><p>C3P0</p><p>Druid</p><p>使用了这些数据库连接池，就不需要在项目开发中编写数据库代码了</p><blockquote><p>DBCP</p></blockquote><p>需要用到的 jar 包<br><img src="https://inencoding.oss-cn-shenzhen.aliyuncs.com/img/20220430185531.png" srcset="/img/loading.gif" lazyload alt="image-20210515151307496"></p><blockquote><p>c3p0</p></blockquote><p>需要用到的 jar 包</p><p><img src="https://inencoding.oss-cn-shenzhen.aliyuncs.com/img/20220430185534.png" srcset="/img/loading.gif" lazyload alt="image-20210515152208066"></p><p><img src="https://inencoding.oss-cn-shenzhen.aliyuncs.com/img/20220430185537.png" srcset="/img/loading.gif" lazyload alt="image-20210515152245452"></p></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="category-chain-item">学习笔记</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">#数据库</a> <a href="/tags/MySQL/">#MySQL</a></div></div><div class="license-box my-3"><div class="license-title"><div>MySQL 学习笔记</div><div>https://www.inencoding.com/posts/39805/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>AWEI</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2021年3月13日</div></div><div class="license-meta-item license-meta-date"><div>更新于</div><div>2022年12月8日</div></div><div class="license-meta-item"><div>许可协议</div><div><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i></span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - 非商业性使用"><i class="iconfont icon-nc"></i></span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - 相同方式共享"><i class="iconfont icon-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/posts/43258/" title="Java 多线程学习笔记"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Java 多线程学习笔记</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a><i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a><div><span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span><script src="/js/duration.js"></script></div></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">总访问量<span id="busuanzi_value_site_pv"></span> 次</span> <span id="busuanzi_container_site_uv" style="display:none">总访客数<span id="busuanzi_value_site_uv"></span> 人</span></div><div class="beian"><span><a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">粤ICP备2021025468号</a></span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t){var e=Fluid.plugins.typing;(t=t.getElementById("subtitle"))&&e&&e(t.getAttribute("data-typed-text"))}((window,document))</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",(function(){var t,o=jQuery("#toc");0!==o.length&&window.tocbot&&(t=jQuery("#board-ctn").offset().top,window.tocbot.init({tocSelector:"#toc-body",contentSelector:".markdown-body",headingSelector:CONFIG.toc.headingSelector||"h1,h2,h3,h4,h5,h6",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",collapseDepth:CONFIG.toc.collapseDepth||0,scrollSmooth:!0,headingsOffset:-t}),0<o.find(".toc-list-item").length&&o.css("visibility","visible"))}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var o,n=[];for(o of(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","))n.push(".markdown-body > "+o.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(n.join(", "))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript><script src="https://fastly.jsdelivr.net/npm/hexo-tag-common@0.1.0/js/index.js"></script><script async>window.onload=function(){var e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.type="text/javascript",e.async=!0,e.src="/sw-register.js?v="+Date.now(),t.parentNode.insertBefore(e,t)}</script></body></html>